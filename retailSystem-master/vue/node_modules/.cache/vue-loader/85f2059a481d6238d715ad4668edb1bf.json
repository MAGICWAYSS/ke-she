{"remainingRequest":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\src\\views\\AddProduct.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\src\\views\\AddProduct.vue","mtime":1685151860237},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684824148122},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1684824148071},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684824148122},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1684824144416}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7YmFzZVVSTH0gZnJvbSAiLi4vLi4vcHVibGljL3VybENvbmZpZyI7CmltcG9ydCBOYXZpIGZyb20gIi4uL2NvbXBvbmVudHMvTmF2aSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFkZFByb2R1Y3QiLAogIGNvbXBvbmVudHM6IHtOYXZpfSwKICBkYXRhKCl7CiAgICByZXR1cm57CiAgICAgIHZhbHVlczpbXSwKICAgICAgY2F0ZWdvcmllczpbXSwKICAgICAgY2F0ZWdvcnlJZDoiIiwKICAgICAgcm9vdENhdGVnb3J5SWQ6IiIsCiAgICAgIHByb2R1Y3RJbWc6W10sCiAgICAgIGxpbWl0OjUsCiAgICAgIHN0cjoi5qC85byP56S65L6LOnvlj6PlkbM6W1wi5Y6f5ZGzXCIsXCLng6fng6RcIl0s5YyF6KOFOltcIuaWsOWMheijhVwiLFwi6ICB5YyF6KOFXCJdfe+8iOWFqOS4uuiLseaWh+espuWPt++8iSIsCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHBhcmFtczp7CiAgICAgICAgInByb2R1Y3RQbGFjZSI6IiIsCiAgICAgICAgImZvb3RQZXJpb2QiOiIiLAogICAgICAgICJicmFuZCI6IiIsCiAgICAgICAgImZhY3RvcnlOYW1lIjoiIiwKICAgICAgICAiZmFjdG9yeUFkZHJlc3MiOiIiLAogICAgICAgICJwYWNrYWdpbmdNZXRob2QiOiIiLAogICAgICAgICJ3ZWlnaHQiOiIiLAogICAgICAgICJzdG9yYWdlTWV0aG9kIjoiIiwKICAgICAgICAiZWF0TWV0aG9kIjoiIiwKICAgICAgfSwKICAgICAgcGFyYW1zUnVsZXM6ewoKICAgICAgfSwKICAgICAgcHJvcHM6ewogICAgICAgIGV4cGFuZFRyaWdnZXI6ICdob3ZlcicsCiAgICAgICAgdmFsdWU6J2NhdGVnb3J5SWQnLAogICAgICAgIGxhYmVsOidjYXRlZ29yeU5hbWUnLAogICAgICAgIGNoaWxkcmVuOidjYXRlZ29yaWVzJwogICAgICB9LAogICAgICBydWxlRm9ybTp7CiAgICAgICAgInByb2R1Y3ROYW1lIjoiIiwKICAgICAgICAiY29udGVudCI6IiIsCiAgICAgIH0sCiAgICAgIHJ1bGVzOnsKICAgICAgICBwcm9kdWN0TmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWVhuWTgeWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyBtaW46IDEsIG1heDogMTYsIG1lc3NhZ2U6ICfplb/luqblnKggMSDliLAgMTYg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIGNvbnRlbnQ6WwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWVhuWTgeaPj+i/sCcsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyBtaW46IDEsICBtZXNzYWdlOiAn5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdCiAgICAgIH0sCiAgICAgIGFjdGlvbjoiIiwKICAgICAgZHluYW1pY1ZhbGlkYXRlRm9ybTogewogICAgICAgIHNrdTogIiIsCiAgICAgICAgc2t1TmFtZTogJycsCiAgICAgICAgb3JpZ2luYWxQcmljZTowLAogICAgICAgIHNlbGxQcmljZTowLAogICAgICAgIHN0b2NrOjAsCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmFjdGlvbiA9IGJhc2VVUkwKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJwcm9kdWN0SWQiKQogICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpPT09bnVsbCl7CiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIueZu+W9leWQjuaJjeWPr+a3u+WKoOWVhuWTgSIpCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKQogICAgfQogIH0sCiAgbWV0aG9kczp7CiAgICBnZXRsaXN0KCl7CiAgICAgIGF4aW9zLmdldChiYXNlVVJMKyIvY2F0ZWdvcnkvY2F0ZWdvcmllcyIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgbGV0IGE9cmVzcG9uc2UuZGF0YQogICAgICAgIHRoaXMuY2F0ZWdvcmllcz10aGlzLnJlY3VyKGEpCiAgICAgIH0pCiAgICB9LAogICAgcmVjdXIoZGF0YSl7CiAgICAgIGZvcihsZXQgaT0wO2k8ZGF0YS5sZW5ndGg7aSsrKXsKICAgICAgICBmb3IgKGxldCBqPTA7ajxkYXRhW2ldLmNhdGVnb3JpZXMubGVuZ3RoO2orKyl7CiAgICAgICAgICBmb3IgKGxldCBrPTA7azxkYXRhW2ldLmNhdGVnb3JpZXNbal0uY2F0ZWdvcmllcy5sZW5ndGg7aysrKXsKICAgICAgICAgICAgZGF0YVtpXS5jYXRlZ29yaWVzW2pdLmNhdGVnb3JpZXNba10uY2F0ZWdvcmllcz11bmRlZmluZWQKICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBkYXRhCiAgICB9LAogICAgaGFuZGxlQ2hhbmdlKHZhbHVlKXsKICAgICAgdGhpcy5jYXRlZ29yeUlkPXZhbHVlWzJdCiAgICAgIHRoaXMucm9vdENhdGVnb3J5SWQ9dmFsdWVbMF0KICAgIH0sCiAgICBoYW5kbGVTdWNjZXNzKHJlc3BvbnNlLGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMucHJvZHVjdEltZy5wdXNoKHJlc3BvbnNlKQogICAgfSwKICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldyhmaWxlKSB7CiAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybDsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBhZGRQcm9kdWN0KCl7CiAgICAgIHZhciBwcm9kdWN0PXsKICAgICAgICAicHJvZHVjdE5hbWUiOnRoaXMucnVsZUZvcm0ucHJvZHVjdE5hbWUsCiAgICAgICAgImNvbnRlbnQiOnRoaXMucnVsZUZvcm0uY29udGVudCwKICAgICAgICAiY2F0ZWdvcnlJZCI6dGhpcy5jYXRlZ29yeUlkLAogICAgICAgICJyb290Q2F0ZWdvcnlJZCI6dGhpcy5yb290Q2F0ZWdvcnlJZCwKICAgICAgICAic29sZE51bSI6MCwKICAgICAgICAicHJvZHVjdFN0YXR1cyI6MSwKICAgICAgfQogICAgICBheGlvcy5wb3N0KGJhc2VVUkwrIi9wcm9kdWN0cy9hZGRQcm9kdWN0Iixwcm9kdWN0KS50aGVuKAogICAgICAgICAgcmVzPT57bG9jYWxTdG9yYWdlLnNldEl0ZW0oInByb2R1Y3RJZCIscmVzLmRhdGEudG9TdHJpbmcoKSkKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmt7vliqDmiJDlip8iKQogICAgICAgICAgfQogICAgICApCiAgICB9LAogICAgYWRkUGFyYW1zKCl7CiAgICAgIHZhciBwYXJhbXM9ewogICAgICAgICJwcm9kdWN0SWQiOmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwcm9kdWN0SWQiKSwKICAgICAgICAicHJvZHVjdFBsYWNlIjp0aGlzLnBhcmFtcy5wcm9kdWN0UGxhY2UsCiAgICAgICAgImZvb3RQZXJpb2QiOnRoaXMucGFyYW1zLmZvb3RQZXJpb2QsCiAgICAgICAgImJyYW5kIjp0aGlzLnBhcmFtcy5icmFuZCwKICAgICAgICAiZmFjdG9yeU5hbWUiOnRoaXMucGFyYW1zLmZhY3RvcnlOYW1lLAogICAgICAgICJmYWN0b3J5QWRkcmVzcyI6dGhpcy5wYXJhbXMuZmFjdG9yeUFkZHJlc3MsCiAgICAgICAgInBhY2thZ2luZ01ldGhvZCI6dGhpcy5wYXJhbXMucGFja2FnaW5nTWV0aG9kLAogICAgICAgICJ3ZWlnaHQiOnRoaXMucGFyYW1zLndlaWdodCwKICAgICAgICAic3RvcmFnZU1ldGhvZCI6dGhpcy5wYXJhbXMuc3RvcmFnZU1ldGhvZCwKICAgICAgICAiZWF0TWV0aG9kIjp0aGlzLnBhcmFtcy5lYXRNZXRob2QsCiAgICAgIH0KICAgICAgICBheGlvcy5wb3N0KGJhc2VVUkwrIi9wcm9kdWN0LXBhcmFtcy9hZGRQYXJhbXMiLHBhcmFtcykudGhlbigKICAgICAgICAgICAgcmVzPT57CiAgICAgICAgICAgICAgaWYocmVzLmRhdGE9PT10cnVlKXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+d5a2Y5oiQ5YqfIikKICAgICAgICAgICAgICBlbHNlIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS/neWtmOWksei0pSIpCiAgICAgICAgICAgIH0KICAgICAgICApCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0SW1nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYoaT09PTApewogICAgICAgICAgdmFyIHByb2R1Y3RJbWc9ewogICAgICAgICAgICAiaXRlbUlkIjpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicHJvZHVjdElkIiksCiAgICAgICAgICAgICJ1cmwiOnRoaXMucHJvZHVjdEltZ1tpXSwKICAgICAgICAgICAgInNvcnQiOjEsCiAgICAgICAgICAgICJpc01haW4iOjEKICAgICAgICAgIH0KICAgICAgICAgIGF4aW9zLnBvc3QoYmFzZVVSTCsiL3Byb2R1Y3QtaW1nL2FkZFByb2R1Y3RJbWciLHByb2R1Y3RJbWcpCiAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICB2YXIgcHJvZHVjdGltZz17CiAgICAgICAgICAgICJpdGVtSWQiOmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwcm9kdWN0SWQiKSwKICAgICAgICAgICAgInVybCI6dGhpcy5wcm9kdWN0SW1nW2ldLAogICAgICAgICAgICAic29ydCI6aSsxLAogICAgICAgICAgICAiaXNNYWluIjowCiAgICAgICAgICB9CiAgICAgICAgICBheGlvcy5wb3N0KGJhc2VVUkwrIi9wcm9kdWN0LWltZy9hZGRQcm9kdWN0SW1nIixwcm9kdWN0aW1nKQogICAgICAgIH0KICAgICAgfQoKICAgIH0sCiAgICBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5hZGRTa3UoKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIGFkZFNrdSgpewogICAgICB2YXIgc2t1PXsKICAgICAgICAicHJvZHVjdElkIjpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicHJvZHVjdElkIiksCiAgICAgICAgInNrdU5hbWUiOnRoaXMuZHluYW1pY1ZhbGlkYXRlRm9ybS5za3VOYW1lLAogICAgICAgICJvcmlnaW5hbFByaWNlIjp0aGlzLmR5bmFtaWNWYWxpZGF0ZUZvcm0ub3JpZ2luYWxQcmljZSwKICAgICAgICAic2VsbFByaWNlIjp0aGlzLmR5bmFtaWNWYWxpZGF0ZUZvcm0uc2VsbFByaWNlLAogICAgICAgICJzdG9jayI6dGhpcy5keW5hbWljVmFsaWRhdGVGb3JtLnN0b2NrLAogICAgICAgICJ1bnRpdGxlZCI6dGhpcy5keW5hbWljVmFsaWRhdGVGb3JtLnNrdSwKICAgICAgICAiZGlzY291bnRzIjoxLjAKICAgICAgfQogICAgICBheGlvcy5wb3N0KGJhc2VVUkwrIi9wcm9kdWN0LXNrdS9hZGRTa3UiLHNrdSkudGhlbigKICAgICAgICAgIHJlcz0+ewogICAgICAgICAgICBpZihyZXMuZGF0YT09PXRydWUpdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmt7vliqDmiJDlip8iKQogICAgICAgICAgICBlbHNlIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIua3u+WKoOWksei0pSIpCiAgICAgICAgICB9CiAgICAgICkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["AddProduct.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddProduct.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Navi/>\n\n<div style=\"width: 60%;margin: 0 auto\">\n  <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\"  >\n    <el-form-item label=\"商品名称\" prop=\"productName\">\n      <el-input v-model=\"ruleForm.productName\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"商品描述\" prop=\"content\">\n      <el-input type=\"textarea\" v-model=\"ruleForm.content\"></el-input>\n    </el-form-item>\n  </el-form>\n  <el-row>\n    <el-col style=\"width: 30%;float: left\">\n      <span>商品分类：</span>\n    </el-col>\n    <el-col style=\"width: 30%;float: left\">\n      <el-cascader\n          v-model=\"values\"\n          style=\"float: left;margin: 5px\"\n          placeholder=\"试试搜索：手机\"\n          size=\"medium\"\n          :props=\"props\" @focus=\"getlist\"\n          :options=\"categories\" @change=\"handleChange\"\n          filterable clearable></el-cascader>\n    </el-col>\n\n  </el-row>\n<el-row>\n  <el-button type=\"primary\" @click=\"addProduct\">添加商品</el-button>\n</el-row>\n  <el-row>\n    <el-upload\n        :action=\"action+'/product-comments/upload'\"\n        list-type=\"picture-card\" :limit=\"limit\" :on-success=\"handleSuccess\"\n        :on-preview=\"handlePictureCardPreview\" style=\"float: left\">\n      <i class=\"el-icon-plus\"></i>\n    </el-upload>\n    <el-dialog :visible.sync=\"dialogVisible\">\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n    </el-dialog>\n  </el-row>\n  <el-row>\n    <el-form :model=\"params\" :rules=\"paramsRules\" ref=\"params\" label-width=\"100px\">\n      <el-form-item label=\"商品生产地\" prop=\"productPlace\">\n        <el-input v-model=\"params.productPlace\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"商品有效期\" prop=\"footPeriod\">\n        <el-input v-model=\"params.footPeriod\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"商品品牌\" prop=\"brand\">\n        <el-input v-model=\"params.brand\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"生产厂名\" prop=\"factoryName\">\n        <el-input v-model=\"params.factoryName\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"产地详细地址\" prop=\"factoryAddress\">\n        <el-input v-model=\"params.factoryAddress\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"包装方式\" prop=\"packagingMethod\">\n        <el-input v-model=\"params.packagingMethod\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"规格重量\" prop=\"weight\">\n        <el-input v-model=\"params.weight\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"储存方式\" prop=\"storageMethod\">\n        <el-input v-model=\"params.storageMethod\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"食用方式\" prop=\"eatMethod\">\n        <el-input v-model=\"params.eatMethod\"></el-input>\n      </el-form-item>\n    </el-form>\n  </el-row>\n  <el-row>\n    <el-button type=\"primary\" @click=\"addParams\">保存商品参数</el-button>\n  </el-row>\n  <el-row>\n    <el-form :model=\"dynamicValidateForm\" ref=\"dynamicValidateForm\" label-width=\"100px\" class=\"demo-dynamic\">\n      <el-form-item\n          prop=\"skuName\"\n          label=\"套餐名\"\n      >\n        <el-input v-model=\"dynamicValidateForm.skuName\"></el-input>\n      </el-form-item>\n      <el-form-item\n          prop=\"originalPrice\"\n          label=\"原价\"\n      >\n        <el-input v-model=\"dynamicValidateForm.originalPrice\"></el-input>\n      </el-form-item>\n      <el-form-item\n          prop=\"sellPrice\"\n          label=\"现价\"\n      >\n        <el-input v-model=\"dynamicValidateForm.sellPrice\"></el-input>\n      </el-form-item>\n      <el-form-item\n          prop=\"stock\"\n          label=\"库存\"\n      >\n        <el-input v-model=\"dynamicValidateForm.stock\" ></el-input>\n      </el-form-item>\n      <el-form-item\n          prop=\"sku\"\n          label=\"属性集合\"\n      >\n        <el-input v-model=\"dynamicValidateForm.sku\" :placeholder=\"str\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm('dynamicValidateForm')\">提交</el-button>\n        <el-button @click=\"resetForm('dynamicValidateForm')\">重置</el-button>\n      </el-form-item>\n    </el-form>\n  </el-row>\n</div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport {baseURL} from \"../../public/urlConfig\";\nimport Navi from \"../components/Navi\";\n\nexport default {\n  name: \"AddProduct\",\n  components: {Navi},\n  data(){\n    return{\n      values:[],\n      categories:[],\n      categoryId:\"\",\n      rootCategoryId:\"\",\n      productImg:[],\n      limit:5,\n      str:\"格式示例:{口味:[\\\"原味\\\",\\\"烧烤\\\"],包装:[\\\"新包装\\\",\\\"老包装\\\"]}（全为英文符号）\",\n      dialogImageUrl: '',\n      dialogVisible: false,\n      params:{\n        \"productPlace\":\"\",\n        \"footPeriod\":\"\",\n        \"brand\":\"\",\n        \"factoryName\":\"\",\n        \"factoryAddress\":\"\",\n        \"packagingMethod\":\"\",\n        \"weight\":\"\",\n        \"storageMethod\":\"\",\n        \"eatMethod\":\"\",\n      },\n      paramsRules:{\n\n      },\n      props:{\n        expandTrigger: 'hover',\n        value:'categoryId',\n        label:'categoryName',\n        children:'categories'\n      },\n      ruleForm:{\n        \"productName\":\"\",\n        \"content\":\"\",\n      },\n      rules:{\n        productName: [\n          { required: true, message: '请输入商品名称', trigger: 'blur' },\n          { min: 1, max: 16, message: '长度在 1 到 16 个字符', trigger: 'blur' }\n        ],\n        content:[\n          { required: true, message: '请输入商品描述', trigger: 'blur' },\n          { min: 1,  message: '不能为空', trigger: 'blur' }\n        ]\n      },\n      action:\"\",\n      dynamicValidateForm: {\n        sku: \"\",\n        skuName: '',\n        originalPrice:0,\n        sellPrice:0,\n        stock:0,\n      }\n    }\n  },\n  created() {\n    this.action = baseURL\n    localStorage.removeItem(\"productId\")\n    if(localStorage.getItem(\"userId\")===null){\n      this.$message.error(\"登录后才可添加商品\")\n      this.$router.push('/login')\n    }\n  },\n  methods:{\n    getlist(){\n      axios.get(baseURL+\"/category/categories\").then((response) => {\n        let a=response.data\n        this.categories=this.recur(a)\n      })\n    },\n    recur(data){\n      for(let i=0;i<data.length;i++){\n        for (let j=0;j<data[i].categories.length;j++){\n          for (let k=0;k<data[i].categories[j].categories.length;k++){\n            data[i].categories[j].categories[k].categories=undefined\n          }\n\n        }\n      }\n      return data\n    },\n    handleChange(value){\n      this.categoryId=value[2]\n      this.rootCategoryId=value[0]\n    },\n    handleSuccess(response,file, fileList) {\n      this.productImg.push(response)\n    },\n    handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    addProduct(){\n      var product={\n        \"productName\":this.ruleForm.productName,\n        \"content\":this.ruleForm.content,\n        \"categoryId\":this.categoryId,\n        \"rootCategoryId\":this.rootCategoryId,\n        \"soldNum\":0,\n        \"productStatus\":1,\n      }\n      axios.post(baseURL+\"/products/addProduct\",product).then(\n          res=>{localStorage.setItem(\"productId\",res.data.toString())\n            this.$message.success(\"添加成功\")\n          }\n      )\n    },\n    addParams(){\n      var params={\n        \"productId\":localStorage.getItem(\"productId\"),\n        \"productPlace\":this.params.productPlace,\n        \"footPeriod\":this.params.footPeriod,\n        \"brand\":this.params.brand,\n        \"factoryName\":this.params.factoryName,\n        \"factoryAddress\":this.params.factoryAddress,\n        \"packagingMethod\":this.params.packagingMethod,\n        \"weight\":this.params.weight,\n        \"storageMethod\":this.params.storageMethod,\n        \"eatMethod\":this.params.eatMethod,\n      }\n        axios.post(baseURL+\"/product-params/addParams\",params).then(\n            res=>{\n              if(res.data===true)this.$message.success(\"保存成功\")\n              else this.$message.error(\"保存失败\")\n            }\n        )\n      for (let i = 0; i < this.productImg.length; i++) {\n        if(i===0){\n          var productImg={\n            \"itemId\":localStorage.getItem(\"productId\"),\n            \"url\":this.productImg[i],\n            \"sort\":1,\n            \"isMain\":1\n          }\n          axios.post(baseURL+\"/product-img/addProductImg\",productImg)\n        }\n        else{\n          var productimg={\n            \"itemId\":localStorage.getItem(\"productId\"),\n            \"url\":this.productImg[i],\n            \"sort\":i+1,\n            \"isMain\":0\n          }\n          axios.post(baseURL+\"/product-img/addProductImg\",productimg)\n        }\n      }\n\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.addSku()\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    addSku(){\n      var sku={\n        \"productId\":localStorage.getItem(\"productId\"),\n        \"skuName\":this.dynamicValidateForm.skuName,\n        \"originalPrice\":this.dynamicValidateForm.originalPrice,\n        \"sellPrice\":this.dynamicValidateForm.sellPrice,\n        \"stock\":this.dynamicValidateForm.stock,\n        \"untitled\":this.dynamicValidateForm.sku,\n        \"discounts\":1.0\n      }\n      axios.post(baseURL+\"/product-sku/addSku\",sku).then(\n          res=>{\n            if(res.data===true)this.$message.success(\"添加成功\")\n            else this.$message.error(\"添加失败\")\n          }\n      )\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"]}]}