{"remainingRequest":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\src\\views\\Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\src\\views\\Search.vue","mtime":1685174109905},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684824148122},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1684824148071},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684824148122},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1684824144416}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7YmFzZVVSTH0gZnJvbSAiLi4vLi4vcHVibGljL3VybENvbmZpZyI7CmltcG9ydCBOYXZpIGZyb20gIi4uL2NvbXBvbmVudHMvTmF2aSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2VhcmNoIiwKICBjb21wb25lbnRzOiB7TmF2aX0sCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBjaWQ6IiIsCiAgICAgIHBhZ2VOdW06MSwKICAgICAgcGFnZVNpemU6MiwKICAgICAgcmVzdWx0OltdLAogICAgICB0b3RhbDowLAogICAgICBrZXl3b3JkOiIiLAogICAgICB1c2VybmFtZTpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcm5hbWUiKSwKICAgICAgaW1nOmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpbWciKSwKICAgICAgdXNlcklkOmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKSwKICAgICAgaW5wdXQ6IiIsCiAgICAgIHNlbGVjdDoiIiwKICAgIH0KICB9LAogIGZpbHRlcnM6IHsKICAgIGN1dCh2YWx1ZSl7CiAgICAgIGlmICghdmFsdWUpIHJldHVybiAi5ZWG5ZOB5ZCN5Li656m6IjsKICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IDEwKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKDAsIDEwKSArICIuLi4iOwogICAgICB9CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0sCiAgICBlbGxpcHNpcyh2YWx1ZSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gIuaaguaXoOivtOaYjiI7CiAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAxMykgewogICAgICAgIHJldHVybiB2YWx1ZS5zbGljZSgwLCAxMykgKyAiLi4uIjsKICAgICAgfQogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5jaWQ9dGhpcy4kcm91dGUucXVlcnkuY2lkCiAgICB0aGlzLmtleXdvcmQ9dGhpcy4kcm91dGUucXVlcnkua2V5d29yZAogICAgdGhpcy5sb2FkKCkKICB9LAogIG1ldGhvZHM6ewogICAgbG9hZCgpewogICAgICBpZih0aGlzLmNpZCE9bnVsbCl7CiAgICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi9wcm9kdWN0cy9zZWFyY2hDYXRlLyIrdGhpcy5jaWQsewogICAgICAgICAgcGFyYW1zOnsicGFnZU51bSI6dGhpcy5wYWdlTnVtLCJwYWdlU2l6ZSI6dGhpcy5wYWdlU2l6ZX0KICAgICAgICB9KS50aGVuKAogICAgICAgICAgICByZXM9PnsKICAgICAgICAgICAgICB0aGlzLnJlc3VsdD1yZXMuZGF0YS5yZWNvcmRzCiAgICAgICAgICAgICAgdGhpcy50b3RhbD1yZXMuZGF0YS50b3RhbAogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2lkKQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVzdWx0KQogICAgICAgICAgICB9CiAgICAgICAgKQogICAgICB9CiAgICAgIGlmKHRoaXMua2V5d29yZCE9bnVsbCl7CiAgICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi9wcm9kdWN0cy9zZWFyY2hOYW1lIix7CiAgICAgICAgICBwYXJhbXM6eyJrZXl3b3JkIjp0aGlzLmtleXdvcmQudG9TdHJpbmcoKSwKICAgICAgICAgICAgInBhZ2VOdW0iOnRoaXMucGFnZU51bSwicGFnZVNpemUiOnRoaXMucGFnZVNpemV9CiAgICAgICAgfSkudGhlbigKICAgICAgICAgICAgcmVzPT57CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQ9cmVzLmRhdGEucmVjb3JkcwogICAgICAgICAgICAgIHRoaXMudG90YWw9cmVzLmRhdGEudG90YWwKICAgICAgICAgICAgfQogICAgICAgICkKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2UocGFnZVNpemUpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHBhZ2VTaXplCiAgICAgIHRoaXMubG9hZCgpCiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZShwYWdlTnVtKSB7CiAgICAgIHRoaXMucGFnZU51bSA9IHBhZ2VOdW0KICAgICAgdGhpcy5sb2FkKCkKICAgIH0sCiAgICBsb2dvdXQoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VybmFtZSIpCiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJpbWciKQogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidG9rZW4iKQogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidXNlcklkIikKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLpgIDlh7rmiJDlip8iKQogICAgICB0aGlzLnVzZXJuYW1lPSIiCiAgICB9LAogICAgcGVyc29uKCl7CiAgICAgIHRoaXMudXNlcm5hbWU9bG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIikKICAgICAgcm91dGVyLnB1c2goIi9wZXJzb24iKQogICAgfSwKICAgIGxvZ2luKCl7CiAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL2xvZ2luJywKICAgICAgICBxdWVyeTp7CiAgICAgICAgICByZWRpcmVjdDogcm91dGVyLmN1cnJlbnRSb3V0ZS5mdWxsUGF0aCAgLy8g6Ziy5q2i5LuO5aSW6YOo6L+b5p2l55m75b2VCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGZ1enp5UXVlcnkoKXsKICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi9wcm9kdWN0cy9zZWFyY2hOYW1lIix7CiAgICAgICAgcGFyYW1zOnsia2V5d29yZCI6dGhpcy5pbnB1dCwKICAgICAgICAgICJwYWdlTnVtIjp0aGlzLnBhZ2VOdW0sInBhZ2VTaXplIjp0aGlzLnBhZ2VTaXplfQogICAgICB9KS50aGVuKAogICAgICAgICAgcmVzPT57CiAgICAgICAgICAgIHRoaXMucmVzdWx0PXJlcy5kYXRhLnJlY29yZHMKICAgICAgICAgICAgdGhpcy50b3RhbD1yZXMuZGF0YS50b3RhbAogICAgICAgICAgfQogICAgICApCiAgICB9LAogICAgc2VhcmNoKHYpewogICAgICBheGlvcy5nZXQoYmFzZVVSTCsiL3Byb2R1Y3RzL3NlYXJjaE5hbWUiLHsKICAgICAgICBwYXJhbXM6eyJrZXl3b3JkIjp2LAogICAgICAgICAgInBhZ2VOdW0iOnRoaXMucGFnZU51bSwicGFnZVNpemUiOnRoaXMucGFnZVNpemV9CiAgICAgIH0pLnRoZW4oCiAgICAgICAgICByZXM9PnsKICAgICAgICAgICAgdGhpcy5yZXN1bHQ9cmVzLmRhdGEucmVjb3JkcwogICAgICAgICAgICB0aGlzLnRvdGFsPXJlcy5kYXRhLnRvdGFsCiAgICAgICAgICB9CiAgICAgICkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div>\n  <div>\n    <div style=\"background-color: #F5F5F5;\">\n      <el-row style=\"width: 80%;margin: 0 auto\">\n        <el-col :span=\"12\" style=\"margin-top: 5px;margin-bottom: 5px\">\n          <div v-if=!username style=\"float: left\">\n            <el-link :underline=\"false\" @click=\"login\">登录</el-link>\n            <el-divider direction=\"vertical\"></el-divider>\n            <el-link :underline=\"false\" href=\"/register\">注册</el-link>\n            <!--            <el-link @click=\"up\">更新状态</el-link>-->\n          </div>\n          <div v-else style=\"float: left\">\n            <el-dropdown>\n              <span class=\"el-dropdown-link\">\n                <el-link :underline=\"false\" href=\"/person\">{{ username }}</el-link> <i class=\"el-icon-arrow-down el-icon--right\"></i>\n              </span>\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item style=\"width: 150px;height: 60px\">\n                  <el-row :gutter=\"20\">\n                    <el-col :span=\"8\"><el-avatar :src=\"require(`../img/${img}`)\" style=\"margin-top: 5px\"></el-avatar></el-col>\n                    <el-col :span=\"16\">\n                      <el-link :underline=\"false\" href=\"/person\">个人中心</el-link>\n                      <el-link :underline=\"false\" @click=\"logout\" >退出登录</el-link>\n                    </el-col>\n                  </el-row>\n                </el-dropdown-item>\n              </el-dropdown-menu>\n            </el-dropdown>\n            <el-divider direction=\"vertical\"></el-divider>\n\n          </div>\n        </el-col>\n        <el-col :span=\"12\"style=\"margin-top: 5px;margin-bottom: 5px\">\n          <div style=\"float: right\">\n            <el-link :underline=\"false\" href=\"/\">商城首页</el-link>\n            <el-divider direction=\"vertical\"></el-divider>\n            <el-link :underline=\"false\" :href=\"'/orderList?uid='+userId\" icon=\"el-icon-circle-check\">我的订单</el-link>\n            <el-divider direction=\"vertical\"></el-divider>\n            <el-link :underline=\"false\" :href=\"'/shopcart?uid='+userId\" icon=\"el-icon-shopping-cart-2\">我的购物车</el-link>\n            <el-divider direction=\"vertical\"></el-divider>\n            <el-link :underline=\"false\" href=\"/addProduct\">商家后台</el-link>\n            <el-divider direction=\"vertical\"></el-divider>\n            <el-link :underline=\"false\" href=\"/history\">我的足迹</el-link>\n\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n    <div >\n      <el-row style=\"width: 80%;margin: 0 auto\">\n        <el-col :span=\"12\" style=\"margin-top: 5px;margin-bottom: 5px\">\n          <el-link href=\"/\"style=\"float: left\" :underline=\"false\">\n            <img src=\"../assets/logo.png\" width=\"130px\" />\n          </el-link>\n        </el-col>\n        <el-col :span=\"12\" style=\"margin-top: 10px;margin-bottom: 5px\">\n          <div style=\"margin-top: 15px;\">\n            <el-input placeholder=\"请输入内容\" v-model=\"input\" @change=\"search\">\n              <el-button slot=\"append\" icon=\"el-icon-search\" style=\"background-color: #FF5A00;color: white\" @click=\"fuzzyQuery\">搜索</el-button>\n            </el-input>\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n  </div>\n  <div style=\"width: 80%;margin: 0 auto;\">\n    <el-row>\n      <el-col :span=\"6\" v-for=\"o in result\" >\n        <el-card style=\"border-radius: 15px;margin: 5px\" shadow=\"hover\">\n          <el-row>\n            <router-link :to=\"{name:'Product',query:{pid:o.productId}}\">\n              <img :src=\"require(`../img/${o.url}`)\" style=\"  width: 100%;height: 100%;display: block;\">\n            </router-link>\n          </el-row>\n          <el-row>\n            <el-col :span=\"16\" style=\" text-align: left;color: #c81623\">\n              <em style=\"font-size:20px;font-weight: 700;\">¥{{o.sellPrice}}</em></el-col>\n            <el-col :span=\"8\">\n              <em style=\"font-size:10px;color: rgb(173,173,173);float: right\">{{o.soldNum}}人付款</em>\n            </el-col>\n          </el-row>\n          <el-row>\n            <router-link :to=\"{name:'Product',query:{pid:o.productId}}\">\n              <span style=\"float: left;font-size: 16px;color: #333333\">{{ o.productName|cut}}</span>\n            </router-link>\n          </el-row>\n          <el-row>\n            <span style=\"float: left;font-size: 10px;color: rgb(153,153,153)\">{{o.content | ellipsis}}</span>\n          </el-row>\n        </el-card>\n      </el-col>\n    </el-row>\n    <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-sizes=\"[2, 5, 10, 20]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\">\n    </el-pagination>\n  </div>\n\n</div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport {baseURL} from \"../../public/urlConfig\";\nimport Navi from \"../components/Navi\";\nimport router from \"../router\";\n\nexport default {\n  name: \"Search\",\n  components: {Navi},\n  data(){\n    return{\n      cid:\"\",\n      pageNum:1,\n      pageSize:2,\n      result:[],\n      total:0,\n      keyword:\"\",\n      username:localStorage.getItem(\"username\"),\n      img:localStorage.getItem(\"img\"),\n      userId:localStorage.getItem(\"userId\"),\n      input:\"\",\n      select:\"\",\n    }\n  },\n  filters: {\n    cut(value){\n      if (!value) return \"商品名为空\";\n      if (value.length > 10) {\n        return value.slice(0, 10) + \"...\";\n      }\n      return value;\n    },\n    ellipsis(value) {\n      if (!value) return \"暂无说明\";\n      if (value.length > 13) {\n        return value.slice(0, 13) + \"...\";\n      }\n      return value;\n    }\n  },\n  created() {\n    this.cid=this.$route.query.cid\n    this.keyword=this.$route.query.keyword\n    this.load()\n  },\n  methods:{\n    load(){\n      if(this.cid!=null){\n        axios.get(baseURL+\"/products/searchCate/\"+this.cid,{\n          params:{\"pageNum\":this.pageNum,\"pageSize\":this.pageSize}\n        }).then(\n            res=>{\n              this.result=res.data.records\n              this.total=res.data.total\n              console.log(this.cid)\n              console.log(this.result)\n            }\n        )\n      }\n      if(this.keyword!=null){\n        axios.get(baseURL+\"/products/searchName\",{\n          params:{\"keyword\":this.keyword.toString(),\n            \"pageNum\":this.pageNum,\"pageSize\":this.pageSize}\n        }).then(\n            res=>{\n              this.result=res.data.records\n              this.total=res.data.total\n            }\n        )\n      }\n    },\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum\n      this.load()\n    },\n    logout() {\n      localStorage.removeItem(\"username\")\n      localStorage.removeItem(\"img\")\n      localStorage.removeItem(\"token\")\n      localStorage.removeItem(\"userId\")\n      this.$message.success(\"退出成功\")\n      this.username=\"\"\n    },\n    person(){\n      this.username=localStorage.getItem(\"username\")\n      router.push(\"/person\")\n    },\n    login(){\n      router.push({\n        path: '/login',\n        query:{\n          redirect: router.currentRoute.fullPath  // 防止从外部进来登录\n        }\n      })\n    },\n    fuzzyQuery(){\n      axios.get(baseURL+\"/products/searchName\",{\n        params:{\"keyword\":this.input,\n          \"pageNum\":this.pageNum,\"pageSize\":this.pageSize}\n      }).then(\n          res=>{\n            this.result=res.data.records\n            this.total=res.data.total\n          }\n      )\n    },\n    search(v){\n      axios.get(baseURL+\"/products/searchName\",{\n        params:{\"keyword\":v,\n          \"pageNum\":this.pageNum,\"pageSize\":this.pageSize}\n      }).then(\n          res=>{\n            this.result=res.data.records\n            this.total=res.data.total\n          }\n      )\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"]}]}