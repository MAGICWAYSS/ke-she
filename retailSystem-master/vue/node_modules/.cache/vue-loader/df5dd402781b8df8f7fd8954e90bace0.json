{"remainingRequest":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\src\\views\\Person.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\src\\views\\Person.vue","mtime":1684822811556},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684824148122},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1684824148071},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684824148122},{"path":"C:\\Users\\何睿\\Downloads\\retailSystem-master\\retailSystem-master\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1684824144416}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7YmFzZVVSTH0gZnJvbSAiLi4vLi4vcHVibGljL3VybENvbmZpZyI7CmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdCI7CmltcG9ydCBOYXZpIGZyb20gIi4uL2NvbXBvbmVudHMvTmF2aSI7CmltcG9ydCBDb21tZW50TGlzdCBmcm9tICIuLi9jb21wb25lbnRzL0NvbW1lbnRMaXN0IjsKaW1wb3J0IEFkZHJlc3MgZnJvbSAiLi4vY29tcG9uZW50cy9BZGRyZXNzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IExvZ2luSGlzdG9yeSBmcm9tICIuLi9jb21wb25lbnRzL0xvZ2luSGlzdG9yeSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBlcnNvbiIsCiAgY29tcG9uZW50czoge0xvZ2luSGlzdG9yeSwgQWRkcmVzcywgQ29tbWVudExpc3QsIE5hdml9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBiYXNlVVJMOiBiYXNlVVJMLAogICAgICBtc2c6IiIsCiAgICAgIGZvcm06e30sCiAgICAgIGltZzogbG9jYWxTdG9yYWdlLmdldEl0ZW0oImltZyIpICwKICAgICAgdXNlcm5hbWU6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VybmFtZSIpLAogICAgICBhY3RpdmVOYW1lOiAnc2Vjb25kJywKICAgICAgdXNlckFkZHI6W10sCiAgICAgIHVzZXJJZDpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIiksCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8g6K+35rGC5YiG6aG15p+l6K+i5pWw5o2uCiAgICB0aGlzLmxvYWQoKQogIH0sCiAgbWV0aG9kczogewogICAgbG9hZCgpIHsKICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi91c2VyL29uZS8iK2xvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VybmFtZSIpCiAgICAgICkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZm9ybT1yZXMuZGF0YQogICAgICB9KQogICAgICBheGlvcy5nZXQoYmFzZVVSTCsiL3VzZXItYWRkci9hZGRyLyIrdGhpcy51c2VySWQpLnRoZW4oCiAgICAgICAgICByZXM9Pnt0aGlzLnVzZXJBZGRyPXJlcy5kYXRhfSkKICAgIH0sCiAgICBjaGlsZGNsaWNrKGl0ZW0pewogICAgICB0aGlzLnVzZXJBZGRyPWl0ZW0KICAgICAgdGhpcy5sb2FkKCkKICAgIH0sCiAgICBzYXZlKCkgewogICAgICBheGlvcy5wb3N0KGJhc2VVUkwrIi91c2VyIiwgdGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS/neWtmOaIkOWKnyIpCiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UKICAgICAgICAgIHRoaXMubG9hZCgpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS/neWtmOWksei0pSIpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGRlbGV0ZU9uZShpZCl7CiAgICAgICAgYXhpb3MuZGVsZXRlKGJhc2VVUkwrIi91c2VyLWFkZHIvZGVsZXRlT25lIix7CiAgICAgICAgICBwYXJhbXM6ewogICAgICAgICAgICBpZDppZAogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oCiAgICAgICAgICAgIHJlcz0+ewogICAgICAgICAgICAgIGlmKHJlcy5kYXRhPT09dHJ1ZSl0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpCiAgICAgICAgICAgICAgZWxzZSB0aGlzLiRtZXNzYWdlLmVycm9yKCLliKDpmaTlpLHotKUiKQogICAgICAgICAgICAgIHRoaXMubG9hZCgpCiAgICAgICAgICAgIH0KICAgICAgICApCiAgICB9LAogICAgdXBkYXRlKGlkKXsKICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi91c2VyLWFkZHIvdXBkYXRlQ29tbW9uQWRkciIsewogICAgICAgIHBhcmFtczp7CiAgICAgICAgICBpZDppZAogICAgICAgIH0KICAgICAgfSkudGhlbigKICAgICAgICAgIHJlcz0+ewogICAgICAgICAgICBpZihyZXMuZGF0YT09PXRydWUpdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkv67mlLnmiJDlip8iKQogICAgICAgICAgICBlbHNlIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS/ruaUueWksei0pSIpCiAgICAgICAgICAgIHRoaXMubG9hZCgpCiAgICAgICAgICB9CiAgICAgICkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Person.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Person.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div >\n    <Navi/>\n    <el-tabs v-model=\"activeName\" tab-position=\"left\" style=\"width: 80%;margin: 0 auto\">\n      <el-tab-pane label=\"个人资料\" name=\"second\"><el-card style=\"width: 80%;float: left\">\n        <el-form label-width=\"80px\" size=\"small\">\n          <el-upload\n              class=\"avatar-uploader\"\n              :action=\"baseURL+'/product-img/upload/'+username\"\n              :show-file-list=\"false\"\n          >\n            <img  :src=\"'http://localhost:9090/img/'+form.userImg\" style=\"width: 100px\"></img>\n           </el-upload>\n\n\n          <el-form-item label=\"用户名\">\n            <el-input v-model=\"form.username\" disabled autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"用户ID\">\n            <el-input v-model=\"form.userId\" disabled autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"性别\">\n            <el-input v-model=\"form.userSex\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"昵称\">\n            <el-input v-model=\"form.nickname\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"真实姓名\">\n            <el-input v-model=\"form.realname\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱\">\n            <el-input v-model=\"form.userEmail\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"电话\">\n            <el-input v-model=\"form.userMobile\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"注册时间\">\n            <el-input  v-model=\"form.userRegtime\" disabled autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n          </el-form-item>\n        </el-form>\n      </el-card></el-tab-pane>\n      <el-tab-pane label=\"收货地址\" name=\"third\">\n        <Address :user-addr=\"userAddr\" @itemclick=\"childclick\"></Address>\n        <el-row style=\"padding: 10px;\" v-if=\"userAddr!=null\">\n          <el-table :data=\"userAddr\">\n            <el-table-column label=\"收货人\" prop=\"receiverName\">\n            </el-table-column>\n            <el-table-column label=\"手机号\" prop=\"receiverMobile\" width=\"120px\"></el-table-column>\n            <el-table-column label=\"省\" prop=\"province\"></el-table-column>\n            <el-table-column label=\"市\" prop=\"city\"></el-table-column>\n            <el-table-column label=\"区\" prop=\"area\"></el-table-column>\n            <el-table-column label=\"地址\" prop=\"addr\"></el-table-column>\n            <el-table-column label=\"邮编\" prop=\"postCode\"></el-table-column>\n            <el-table-column label=\"操作\" fixed=\"right\">\n              <template slot-scope=\"scope\">\n                <el-button v-if=\"scope.row.commonAddr===1\" disabled type=\"text\" size=\"mini\">默认地址</el-button>\n                <el-button v-else @click=\"update(scope.row.addrId)\" type=\"text\" size=\"mini\">设为默认地址</el-button>\n              </template>\n            </el-table-column>\n            <el-table-column fixed=\"right\">\n              <template slot-scope=\"scope\">\n                <el-button\n                    size=\"mini\" @click=\"deleteOne(scope.row.addrId)\"\n                    type=\"text\" icon=\"el-icon-delete\">删除</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-row>\n      </el-tab-pane>\n      <el-tab-pane label=\"我的评价\" name=\"fourth\"><CommentList></CommentList></el-tab-pane>\n      <el-tab-pane label=\"登录历史\" name=\"fivth\"><LoginHistory></LoginHistory></el-tab-pane>\n    </el-tabs>\n  </div>\n\n</template>\n\n<script>\nimport {baseURL} from \"../../public/urlConfig\";\nimport request from \"@/utils/request\";\nimport Navi from \"../components/Navi\";\nimport CommentList from \"../components/CommentList\";\nimport Address from \"../components/Address\";\nimport axios from \"axios\";\nimport LoginHistory from \"../components/LoginHistory\";\n\nexport default {\n  name: \"Person\",\n  components: {LoginHistory, Address, CommentList, Navi},\n  data() {\n    return {\n      baseURL: baseURL,\n      msg:\"\",\n      form:{},\n      img: localStorage.getItem(\"img\") ,\n      username: localStorage.getItem(\"username\"),\n      activeName: 'second',\n      userAddr:[],\n      userId:localStorage.getItem(\"userId\"),\n    }\n  },\n  created() {\n    // 请求分页查询数据\n    this.load()\n  },\n  methods: {\n    load() {\n      axios.get(baseURL+\"/user/one/\"+localStorage.getItem(\"username\")\n      ).then(res => {\n        this.form=res.data\n      })\n      axios.get(baseURL+\"/user-addr/addr/\"+this.userId).then(\n          res=>{this.userAddr=res.data})\n    },\n    childclick(item){\n      this.userAddr=item\n      this.load()\n    },\n    save() {\n      axios.post(baseURL+\"/user\", this.form).then(res => {\n        if (res.data) {\n          this.$message.success(\"保存成功\")\n          this.dialogFormVisible = false\n          this.load()\n        } else {\n          this.$message.error(\"保存失败\")\n        }\n      })\n    },\n    deleteOne(id){\n        axios.delete(baseURL+\"/user-addr/deleteOne\",{\n          params:{\n            id:id\n          }\n        }).then(\n            res=>{\n              if(res.data===true)this.$message.success(\"删除成功\")\n              else this.$message.error(\"删除失败\")\n              this.load()\n            }\n        )\n    },\n    update(id){\n      axios.get(baseURL+\"/user-addr/updateCommonAddr\",{\n        params:{\n          id:id\n        }\n      }).then(\n          res=>{\n            if(res.data===true)this.$message.success(\"修改成功\")\n            else this.$message.error(\"修改失败\")\n            this.load()\n          }\n      )\n    }\n  }\n}\n</script>\n\n<style>\n.avatar-uploader {\n  text-align: center;\n  padding-bottom: 10px;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 138px;\n  height: 138px;\n  line-height: 138px;\n  text-align: center;\n}\n.avatar {\n  width: 138px;\n  height: 138px;\n  display: block;\n}\n</style>\n"]}]}