{"remainingRequest":"D:\\xiaomi\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xiaomi\\vue\\src\\views\\Remark.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\xiaomi\\vue\\src\\views\\Remark.vue","mtime":1685282428226},{"path":"D:\\xiaomi\\vue\\babel.config.js","mtime":1685282419250},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgTmF2aSBmcm9tICIuLi9jb21wb25lbnRzL05hdmkiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgeyBiYXNlVVJMIH0gZnJvbSAiLi4vLi4vcHVibGljL3VybENvbmZpZyI7CnZhciBhID0ge307CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVtYXJrIiwKICBjb21wb25lbnRzOiB7CiAgICBOYXZpOiBOYXZpCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aW9uOiAiIiwKICAgICAgcHJvZHVjdElkOiAiIiwKICAgICAgbGltaXQ6IDUsCiAgICAgIGlzQW5vbnltb3VzOiAiMCIsCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHVzZXJJZDogIiIsCiAgICAgIHZhbHVlOiBudWxsLAogICAgICB0ZXh0YXJlYTogIiIsCiAgICAgIHByb2R1Y3ROYW1lOiAiIiwKICAgICAgY29udGVudDogIiIsCiAgICAgIHByb2R1Y3RJbWc6ICIiLAogICAgICBjb21tZW50SW1nOiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmFjdGlvbiA9IGJhc2VVUkw7CiAgICB0aGlzLnByb2R1Y3RJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBpZDsKICAgIHRoaXMudXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpOwogICAgdGhpcy5sb2FkKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkOiBmdW5jdGlvbiBsb2FkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwgKyAiL3Byb2R1Y3RzL3Byb2R1Y3QvIiArIHRoaXMucHJvZHVjdElkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5wcm9kdWN0TmFtZSA9IHJlcy5kYXRhLmRhdGEucHJvZHVjdC5wcm9kdWN0TmFtZTsKICAgICAgICBfdGhpcy5jb250ZW50ID0gcmVzLmRhdGEuZGF0YS5wcm9kdWN0LmNvbnRlbnQ7CiAgICAgICAgX3RoaXMucHJvZHVjdEltZyA9IHJlcy5kYXRhLmRhdGEucHJvZHVjdEltZ3NbMF0udXJsOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVTdWNjZXNzKHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmNvbW1lbnRJbWcucHVzaChyZXNwb25zZSk7CiAgICAgIGEgPSB7CiAgICAgICAgaW1nOiB0aGlzLmNvbW1lbnRJbWcKICAgICAgfTsKICAgIH0sCiAgICBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXc6IGZ1bmN0aW9uIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldyhmaWxlKSB7CiAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybDsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBjb21tZW50OiBmdW5jdGlvbiBjb21tZW50KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBjb21tZW50ID0gewogICAgICAgICJjb21tSW1ncyI6IEpTT04uc3RyaW5naWZ5KGEpLAogICAgICAgICJjb21tQ29udGVudCI6IHRoaXMudGV4dGFyZWEsCiAgICAgICAgImNvbW1MZXZlbCI6IHRoaXMudmFsdWUsCiAgICAgICAgImlzQW5vbnltb3VzIjogdGhpcy5pc0Fub255bW91cywKICAgICAgICAicHJvZHVjdElkIjogdGhpcy5wcm9kdWN0SWQsCiAgICAgICAgInByb2R1Y3ROYW1lIjogdGhpcy5wcm9kdWN0TmFtZSwKICAgICAgICAidXNlcklkIjogdGhpcy51c2VySWQKICAgICAgfTsKICAgICAgYXhpb3MucG9zdChiYXNlVVJMICsgIi9wcm9kdWN0LWNvbW1lbnRzL21ha2VDb21tZW50IiwgY29tbWVudCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDEwMDAwKSBfdGhpczIuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tc2cpO2Vsc2UgX3RoaXMyLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgIH0pOwogICAgICBheGlvcy5nZXQoYmFzZVVSTCArICIvb3JkZXItaXRlbS91cGRhdGVDb21tZW50IiwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgIml0ZW1JZCI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpdGVtX2lkIiksCiAgICAgICAgICAiaXNDb21tZW50IjogMQogICAgICAgIH0sCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgInRva2VuIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgICB9CiAgICAgIH0pLnRoZW4oKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIml0ZW1faWQiKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACAA,gBADA;AAEAC;AAAAC;AAAA,GAFA;AAGAC,MAHA,kBAGA;AACA;AACAC,gBADA;AAEAC,mBAFA;AAGAC,cAHA;AAIAC,sBAJA;AAKAC,wBALA;AAMAC,0BANA;AAOAC,gBAPA;AAQAC,iBARA;AASAC,kBATA;AAUAC,qBAVA;AAWAC,iBAXA;AAYAC,oBAZA;AAaAC;AAbA;AAeA,GAnBA;AAoBAC,SApBA,qBAoBA;AACA;AACA;AACA;AACA;AACA,GAzBA;AA0BAC;AACAC,QADA,kBACA;AAAA;;AACAC,sEACA;AACA;AACA;AACA;AACA,OALA;AAOA,KATA;AAUAC,iBAVA,yBAUAC,QAVA,EAUAC,IAVA,EAUAC,QAVA,EAUA;AACA;AACAC;AACAC;AADA;AAGA,KAfA;AAgBAC,4BAhBA,oCAgBAJ,IAhBA,EAgBA;AACA;AACA;AACA,KAnBA;AAoBAK,WApBA,qBAoBA;AAAA;;AACA;AACA,qCADA;AAEA,oCAFA;AAGA,+BAHA;AAIA,uCAJA;AAKA,mCALA;AAMA,uCANA;AAOA;AAPA;AASAR,0EACA;AACA,gFACA;AACA,OAJA;AAMAA;AACAS;AACA,mDADA;AAEA;AAFA,SADA;AAKAC;AACA;AADA;AALA,SAQAC,IARA;AASAC;AACA;AA9CA;AA1BA","names":["name","components","Navi","data","action","productId","limit","isAnonymous","dialogImageUrl","dialogVisible","userId","value","textarea","productName","content","productImg","commentImg","created","methods","load","axios","handleSuccess","response","file","fileList","a","img","handlePictureCardPreview","comment","params","headers","then","localStorage"],"sourceRoot":"src/views","sources":["Remark.vue"],"sourcesContent":["<template>\r\n<div>\r\n  <Navi/>\r\n  <div>\r\n    <el-row STYLE=\"width: 80%;margin: 0 auto\">\r\n      <el-col :span=\"8\"style=\"padding: 50px\">\r\n        <el-row >\r\n          <router-link :to=\"{name:'Product',query:{pid:productId}}\">\r\n            <img :src=\"'http://localhost:9090/img/'+productImg\" style=\"width: 200px\"></img></router-link>\r\n        </el-row>\r\n        <el-row>\r\n          <el-link :href=\"'product?pid='+productId\" :underline=\"false\">\r\n            <span>{{productName}}</span>\r\n          </el-link>\r\n        </el-row>\r\n        <el-row>\r\n          <span style=\"font-size: 10px;color: rgb(173,173,173)\">{{content}}</span>\r\n        </el-row>\r\n      </el-col>\r\n      <el-col :span=\"16\" style=\"padding: 50px\">\r\n        <el-row>\r\n          <el-rate\r\n              v-model=\"value\" show-text style=\"float: left\"\r\n              :colors=\"['#99A9BF', '#F7BA2A', '#FF9900']\">1\r\n          </el-rate>\r\n        </el-row>\r\n        <el-row>\r\n          <el-input\r\n              type=\"textarea\"\r\n              placeholder=\"亲，写点评价吧，你的评价对其他买家有很大帮助的。\"\r\n              v-model=\"textarea\"\r\n              maxlength=\"255\"\r\n              show-word-limit\r\n          >\r\n          </el-input>\r\n        </el-row>\r\n        <el-row>\r\n          <el-upload\r\n              :action=\"action+'/product-comments/upload'\"\r\n              list-type=\"picture-card\" :limit=\"limit\" :on-success=\"handleSuccess\"\r\n              :on-preview=\"handlePictureCardPreview\" style=\"float: left\">\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-upload>\r\n          <el-dialog :visible.sync=\"dialogVisible\">\r\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n          </el-dialog>\r\n        </el-row>\r\n        <el-row>\r\n          <template>\r\n            <el-radio v-model=\"isAnonymous\" label=\"0\">公开</el-radio>\r\n            <el-radio v-model=\"isAnonymous\" label=\"1\">匿名</el-radio>\r\n            <el-button @click=\"comment\">发表评论</el-button>\r\n          </template>\r\n        </el-row>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Navi from \"../components/Navi\";\r\nimport axios from \"axios\";\r\nimport {baseURL} from \"../../public/urlConfig\";\r\nlet a={}\r\nexport default {\r\n  name: \"Remark\",\r\n  components: {Navi},\r\n  data(){\r\n    return{\r\n      action:\"\",\r\n      productId:\"\",\r\n      limit:5,\r\n      isAnonymous:\"0\",\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      userId:\"\",\r\n      value:null,\r\n      textarea:\"\",\r\n      productName:\"\",\r\n      content:\"\",\r\n      productImg:\"\",\r\n      commentImg:[],\r\n    }\r\n  },\r\n  created() {\r\n    this.action=baseURL\r\n    this.productId=this.$route.query.pid;\r\n    this.userId=localStorage.getItem(\"userId\")\r\n    this.load()\r\n  },\r\n  methods:{\r\n    load(){\r\n      axios.get(baseURL+\"/products/product/\"+this.productId).then(\r\n          res=>{\r\n            this.productName=res.data.data.product.productName\r\n            this.content=res.data.data.product.content\r\n            this.productImg=res.data.data.productImgs[0].url\r\n          }\r\n      )\r\n    },\r\n    handleSuccess(response,file, fileList) {\r\n      this.commentImg.push(response)\r\n      a={\r\n        img:this.commentImg\r\n      }\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    comment(){\r\n      let comment={\r\n          \"commImgs\":JSON.stringify(a),\r\n        \"commContent\":this.textarea,\r\n        \"commLevel\":this.value,\r\n        \"isAnonymous\":this.isAnonymous,\r\n        \"productId\":this.productId,\r\n        \"productName\":this.productName,\r\n        \"userId\":this.userId,\r\n      }\r\n      axios.post(baseURL+\"/product-comments/makeComment\",comment).then(\r\n          res=>{\r\n            if(res.data.code===10000)this.$message.success(res.data.msg)\r\n            else this.$message.error(res.data.msg)\r\n          }\r\n      )\r\n      axios.get(baseURL+\"/order-item/updateComment\",{\r\n        params:{\r\n          \"itemId\":localStorage.getItem(\"item_id\"),\r\n          \"isComment\":1\r\n        },\r\n        headers:{\r\n          \"token\":localStorage.getItem(\"token\")\r\n        }\r\n      }).then()\r\n      localStorage.removeItem(\"item_id\")\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}