{"remainingRequest":"D:\\xiaomi\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xiaomi\\vue\\src\\views\\Product.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\xiaomi\\vue\\src\\views\\Product.vue","mtime":1685282428226},{"path":"D:\\xiaomi\\vue\\babel.config.js","mtime":1685282419250},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkQ6L3hpYW9taS92dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGJhc2VVUkwgfSBmcm9tICIuLi8uLi9wdWJsaWMvdXJsQ29uZmlnIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmltcG9ydCBOYXZpIGZyb20gIi4uL2NvbXBvbmVudHMvTmF2aSI7CmltcG9ydCBQcm9kdWN0UGFyYW1zIGZyb20gIi4uL2NvbXBvbmVudHMvUHJvZHVjdFBhcmFtcyI7CmltcG9ydCBDb21tZW50cyBmcm9tICIuLi9jb21wb25lbnRzL0NvbW1lbnRzIjsKdmFyIHNrdU1hcHMgPSBuZXcgTWFwKCk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUHJvZHVjdCIsCiAgY29tcG9uZW50czogewogICAgUHJvZHVjdFBhcmFtczogUHJvZHVjdFBhcmFtcywKICAgIE5hdmk6IE5hdmksCiAgICBDb21tZW50czogQ29tbWVudHMKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0SWQ6ICIiLAogICAgICBudW06IDEsCiAgICAgIGN1cnJlbnRTa3VJbmRleDogMCwKICAgICAgY3VycmVudEltZ0luZGV4OiAwLAogICAgICB0YWI6IFtdLAogICAgICB0YWJQb3NpdGlvbjogIjAiLAogICAgICBwcm9kdWN0SW5mbzoge30sCiAgICAgIHByb2R1Y3RTa3U6IFtdLAogICAgICBwcm9kdWN0SW1nczogW10sCiAgICAgIHNrdVByb3BzOiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvL+iOt+WPluWIsHVybOS8oOmAkueahOWVhuWTgWlkCiAgICB0aGlzLnByb2R1Y3RJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBpZDsKICAgIHRoaXMubG9hZCgpOwogICAgdGhpcy5hZGRIaXN0b3J5KCk7CiAgICB2YXIgbGVuID0gMzsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIHZhciBpdGVtID0gewogICAgICAgIHZhbHVlOiAiMCIKICAgICAgfTsKICAgICAgdGhpcy50YWIucHVzaChpdGVtKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBheGlvcy5nZXQoYmFzZVVSTCArICIvcHJvZHVjdHMvcHJvZHVjdC8iICsgdGhpcy5wcm9kdWN0SWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnByb2R1Y3RJbmZvID0gcmVzLmRhdGEuZGF0YS5wcm9kdWN0OwogICAgICAgIF90aGlzLnByb2R1Y3RTa3UgPSByZXMuZGF0YS5kYXRhLnByb2R1Y3RTa3U7CiAgICAgICAgX3RoaXMucHJvZHVjdEltZ3MgPSByZXMuZGF0YS5kYXRhLnByb2R1Y3RJbWdzOyAvL2V2YWzlsIZqc29u5qC85byP6L2s5YyW5Li6TWFw6ZSu5YC85a+55qC85byPCgogICAgICAgIF90aGlzLnNrdVByb3BzID0gZXZhbCgiKCIgKyBfdGhpcy5wcm9kdWN0U2t1W190aGlzLmN1cnJlbnRTa3VJbmRleF0udW50aXRsZWQgKyAiKSIpOwogICAgICB9KTsKICAgIH0sCiAgICByZWN1cjogZnVuY3Rpb24gcmVjdXIoZGF0YSkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGFbaV0uZGlzdHJpY3RzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGRhdGFbaV0uZGlzdHJpY3RzW2pdLmRpc3RyaWN0cy5sZW5ndGg7IGsrKykgewogICAgICAgICAgICBkYXRhW2ldLmRpc3RyaWN0c1tqXS5kaXN0cmljdHNba10uZGlzdHJpY3RzID0gdW5kZWZpbmVkOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9LAogICAgY2hhbmdlU2t1OiBmdW5jdGlvbiBjaGFuZ2VTa3UodmFsKSB7CiAgICAgIHRoaXMuY3VycmVudFNrdUluZGV4ID0gdmFsOyAvL2V2YWzlsIZqc29u5qC85byP6L2s5YyW5Li6TWFw6ZSu5YC85a+55qC85byPCgogICAgICB0aGlzLnNrdVByb3BzID0gZXZhbCgiKCIgKyB0aGlzLnByb2R1Y3RTa3VbdGhpcy5jdXJyZW50U2t1SW5kZXhdLnVudGl0bGVkICsgIikiKTsKICAgIH0sCiAgICBjaGFuZ2VJbWc6IGZ1bmN0aW9uIGNoYW5nZUltZyh2YWwpIHsKICAgICAgdGhpcy5jdXJyZW50SW1nSW5kZXggPSB2YWw7CiAgICB9LAogICAgY2hhbmdlS2V5OiBmdW5jdGlvbiBjaGFuZ2VLZXkodmFsLCBlKSB7CiAgICAgIHNrdU1hcHMuc2V0KGUsIHZhbCk7CiAgICB9LAogICAgYWRkTGlzdDogZnVuY3Rpb24gYWRkTGlzdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgYSA9ICIiOwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHNrdU1hcHMua2V5cygpKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGtleXMgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIGEgKz0ga2V5cyArICI6IiArIHNrdU1hcHMuZ2V0KGtleXMpICsgIjsiOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CgogICAgICB2YXIgY2FydHMgPSB7CiAgICAgICAgImNhcnROdW0iOiB0aGlzLm51bSwKICAgICAgICAicHJvZHVjdElkIjogdGhpcy5wcm9kdWN0SWQsCiAgICAgICAgInByb2R1Y3RQcmljZSI6IHRoaXMucHJvZHVjdFNrdVt0aGlzLmN1cnJlbnRTa3VJbmRleF0uc2VsbFByaWNlLAogICAgICAgICJza3VJZCI6IHRoaXMucHJvZHVjdFNrdVt0aGlzLmN1cnJlbnRTa3VJbmRleF0uc2t1SWQsCiAgICAgICAgInNrdVByb3BzIjogYSwKICAgICAgICAidXNlcklkIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpCiAgICAgIH07CiAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwogICAgICBheGlvcy5wb3N0KGJhc2VVUkwgKyAiL3Nob3BwaW5nLWNhcnQvYWRkIiwgY2FydHMsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICB0b2tlbjogdG9rZW4KICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDEwMDAwKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tc2cpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMTAwMDEpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpOwoKICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgcGF0aDogJy9sb2dpbicsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgcmVkaXJlY3Q6IHJvdXRlci5jdXJyZW50Um91dGUuZnVsbFBhdGggLy8g6Ziy5q2i5LuO5aSW6YOo6L+b5p2l55m75b2VCgogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBhID0gIiI7CgogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHNrdU1hcHMua2V5cygpKSwKICAgICAgICAgIF9zdGVwMjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBrZXlzID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgYSArPSBrZXlzICsgIjoiICsgc2t1TWFwcy5nZXQoa2V5cykgKyAiOyI7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQoKICAgICAgdmFyIGNhcnRzID0gewogICAgICAgICJjYXJ0TnVtIjogdGhpcy5udW0sCiAgICAgICAgInByb2R1Y3RJZCI6IHRoaXMucHJvZHVjdElkLAogICAgICAgICJwcm9kdWN0UHJpY2UiOiB0aGlzLnByb2R1Y3RTa3VbdGhpcy5jdXJyZW50U2t1SW5kZXhdLnNlbGxQcmljZSwKICAgICAgICAic2t1SWQiOiB0aGlzLnByb2R1Y3RTa3VbdGhpcy5jdXJyZW50U2t1SW5kZXhdLnNrdUlkLAogICAgICAgICJza3VQcm9wcyI6IGEsCiAgICAgICAgInVzZXJJZCI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKQogICAgICB9OwogICAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKTsKICAgICAgYXhpb3MucG9zdChiYXNlVVJMICsgIi9zaG9wcGluZy1jYXJ0L2FkZCIsIGNhcnRzLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgdG9rZW46IHRva2VuCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAxMDAwMCkgewogICAgICAgICAgX3RoaXMzLiRyb3V0ZXIucHVzaCgiL29yZGVyP2NpZHM9IiArIHJlcy5kYXRhLmRhdGEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMTAwMDEpIHsKICAgICAgICAgIF90aGlzMy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpOwoKICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgcGF0aDogJy9sb2dpbicsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgcmVkaXJlY3Q6IHJvdXRlci5jdXJyZW50Um91dGUuZnVsbFBhdGggLy8g6Ziy5q2i5LuO5aSW6YOo6L+b5p2l55m75b2VCgogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFkZEhpc3Rvcnk6IGZ1bmN0aW9uIGFkZEhpc3RvcnkoKSB7CiAgICAgIHZhciBoaXN0b3J5ID0gewogICAgICAgICJwcm9kdWN0SWQiOiB0aGlzLnByb2R1Y3RJZCwKICAgICAgICAidXNlcklkIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpCiAgICAgIH07CiAgICAgIGF4aW9zLnBvc3QoYmFzZVVSTCArICIvaGlzdG9yeS9pbnNlcnQiLCBoaXN0b3J5KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,iBADA;AAEAC;AAAAC;AAAAC;AAAAC;AAAA,GAFA;AAGAC,MAHA,kBAGA;AACA;AACAC,mBADA;AAEAC,YAFA;AAGAC,wBAHA;AAIAC,wBAJA;AAKAC,aALA;AAMAC,sBANA;AAOAC,qBAPA;AAQAC,oBARA;AASAC,qBATA;AAUAC;AAVA;AAYA,GAhBA;AAiBAC,SAjBA,qBAiBA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AAAAC;AAAA;AACA;AACA;AACA,GA3BA;AA4BAC;AACAC,QADA,kBACA;AAAA;;AACAC,sEACA;AACA;AACA;AACA,sDAHA,CAIA;;AACA;AACA,OAPA;AASA,KAXA;AAYAC,SAZA,iBAYAhB,IAZA,EAYA;AACA;AACA;AACA;AACAA;AACA;AAEA;AACA;;AACA;AACA,KAtBA;AAuBAiB,aAvBA,qBAuBAC,GAvBA,EAuBA;AACA,iCADA,CAEA;;AACA;AACA,KA3BA;AA4BAC,aA5BA,qBA4BAD,GA5BA,EA4BA;AACA;AACA,KA9BA;AA+BAE,aA/BA,qBA+BAF,GA/BA,EA+BAG,CA/BA,EA+BA;AACAC;AACA,KAjCA;AAkCAC,WAlCA,qBAkCA;AAAA;;AACA;;AADA,iDAEAD,cAFA;AAAA;;AAAA;AAEA;AAAA;AACAE;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;;AAKA;AACA,2BADA;AAEA,mCAFA;AAGA,uEAHA;AAIA,4DAJA;AAKA,qBALA;AAMA;AANA;AAQA;AACAT;AAAAU;AACAC;AADA;AAAA,SACAC,IADA,CACA;AACA;AACA;AACA;;AACA;AACA;;AACAC;AACAC,0BADA;AAEAC;AACAC,oDADA,CACA;;AADA;AAFA;AAMA;AACA,OAdA;AAeA,KA/DA;AAgEAC,UAhEA,oBAgEA;AAAA;;AACA;;AADA,kDAEAV,cAFA;AAAA;;AAAA;AAEA;AAAA;AACAE;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;;AAKA;AACA,2BADA;AAEA,mCAFA;AAGA,uEAHA;AAIA,4DAJA;AAKA,qBALA;AAMA;AANA;AAQA;AACAT;AAAAU;AACAC;AADA;AAAA,SACAC,IADA,CACA;AACA;AACA;AACA;;AACA;AACA;;AACAC;AACAC,0BADA;AAEAC;AACAC,oDADA,CACA;;AADA;AAFA;AAMA;AACA,OAdA;AAeA,KA7FA;AA8FAE,cA9FA,wBA8FA;AACA;AACA,mCADA;AAEA;AAFA;AAIAlB;AACA;AApGA;AA5BA","names":["name","components","ProductParams","Navi","Comments","data","productId","num","currentSkuIndex","currentImgIndex","tab","tabPosition","productInfo","productSku","productImgs","skuProps","created","value","methods","load","axios","recur","changeSku","val","changeImg","changeKey","e","skuMaps","addList","a","headers","token","then","router","path","query","redirect","submit","addHistory"],"sourceRoot":"src/views","sources":["Product.vue"],"sourcesContent":["<template>\r\n<div style=\"overflow-x: hidden\">\r\n  <Navi/>\r\n  <el-row :gutter=\"20\" style=\"background-color: white;width: 80%;margin: 0 auto\">\r\n    <el-col :span=\"8\">\r\n      <el-col>\r\n        <el-image :src=\"require(`../img/${productImgs[currentImgIndex].url}`)\" fit=\"fill\"\r\n                  :preview-src-list=\"['../img'+productImgs[currentImgIndex].url]\"\r\n        style=\"height: 210px\"></el-image>\r\n      </el-col>\r\n      <el-col>\r\n        <el-carousel :autoplay=\"false\" type=\"card\" height=\"100px\" @change=\"changeImg\">\r\n          <el-carousel-item  v-for=\"item in productImgs\" >\r\n            <el-image :src=\"require(`../img/${item.url}`)\" style=\"height: 100%;\"></el-image>\r\n          </el-carousel-item>\r\n        </el-carousel>\r\n      </el-col>\r\n    </el-col>\r\n    <el-col :span=\"16\">\r\n        <el-col>\r\n          <h3 style=\"float: left;margin: 5px\">{{productInfo.productName}}</h3>\r\n        </el-col>\r\n        <el-col style=\"background-color:#fee9eb\">\r\n          <el-col style=\"margin: 5px\">\r\n            <el-col :span=\"3\"style=\"text-align: left;font-size: 16px\">原价：</el-col>\r\n            <el-col :span=\"16\" style=\" text-align: left\">\r\n              <em style=\"font-size: 16px;text-decoration: line-through\">¥{{productSku[currentSkuIndex].originalPrice}}</em></el-col>\r\n          </el-col>\r\n          <el-col style=\"margin: 5px\">\r\n            <el-col :span=\"3\"style=\"text-align: left;font-size: 16px\">促销价：</el-col>\r\n            <el-col :span=\"16\" style=\" text-align: left;color: #c81623\">\r\n              <em style=\"font-size:30px;font-weight: 700;\">¥{{productSku[currentSkuIndex].sellPrice}}</em></el-col>\r\n          </el-col>\r\n        </el-col>\r\n        <el-col >\r\n          <span style=\"margin: 5px;float: left\" >套餐：</span>\r\n          <div style=\"margin: 5px;float: left\" v-for=\"(sku,index) in productSku\" >\r\n            <el-radio-group v-model=\"tabPosition\" size=\"medium\"  @change=\"changeSku\">\r\n              <el-radio-button :label=\"index\" >{{sku.skuName}}</el-radio-button>\r\n            </el-radio-group>\r\n          </div>\r\n        </el-col>\r\n        <el-col v-for=\"(value,key,index) in skuProps\" >\r\n          <span style=\"margin: 5px;float: left\" >{{ key }}：</span>\r\n          <div style=\"margin: 5px;float: left\" v-for=\"(sku) in value\">\r\n            <el-radio-group v-model=\"tab[index].value\" :key=\"key\" size=\"medium\" @change=\"(skus)=>changeKey(skus,key)\" >\r\n              <el-radio-button :label=\"sku\" >{{sku}}</el-radio-button>\r\n            </el-radio-group>\r\n          </div>\r\n        </el-col>\r\n        <el-col>\r\n          <el-descriptions size=\"medium\" style=\"text-align: left;font-size: 16px;margin: 5px\">\r\n            <el-descriptions-item label=\"库存：\">{{ productSku[currentSkuIndex].stock }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"累计销量：\">{{productInfo.soldNum}}件</el-descriptions-item>\r\n          </el-descriptions>\r\n        </el-col>\r\n        <el-col>\r\n          <el-input-number v-model=\"num\"  :min=\"1\" :max=\"productSku[currentSkuIndex].stock\" label=\"描述文字\"\r\n          style=\"float: left;margin: 5px\"></el-input-number>\r\n          <el-button type=\"warning\" round plain style=\"margin: 5px;\" @click=\"addList\">添加购物车</el-button>\r\n          <el-button type=\"success\" round plain style=\"margin: 5px;\" @click=\"submit\">立即购买</el-button>\r\n        </el-col>\r\n    </el-col>\r\n  </el-row>\r\n  <el-tabs type=\"border-card\" style=\"margin: 0 auto;width: 80%\">\r\n    <el-tab-pane label=\"宝贝详情\"><ProductParams :productId=\"productId\" :productImgs=\"productImgs\"></ProductParams></el-tab-pane>\r\n    <el-tab-pane >\r\n      <span slot=\"label\"><i class=\"el-icon-chat-dot-square\"></i> 评价</span>\r\n      <Comments :productId=\"productId\"></Comments>\r\n    </el-tab-pane>\r\n  </el-tabs>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport {baseURL} from \"../../public/urlConfig\";\r\nimport router from \"@/router\";\r\nimport Navi from \"../components/Navi\";\r\nimport ProductParams from \"../components/ProductParams\";\r\nimport Comments from \"../components/Comments\";\r\nlet skuMaps=new Map()\r\nexport default {\r\n  name: \"Product\",\r\n  components: {ProductParams, Navi,Comments},\r\n  data(){\r\n    return{\r\n      productId:\"\",\r\n      num:1,\r\n      currentSkuIndex:0,\r\n      currentImgIndex:0,\r\n      tab: [],\r\n      tabPosition:\"0\",\r\n      productInfo:{},\r\n      productSku:[],\r\n      productImgs:[],\r\n      skuProps:[],\r\n    }\r\n  },\r\n  created() {\r\n    //获取到url传递的商品id\r\n    this.productId=this.$route.query.pid;\r\n    this.load();\r\n    this.addHistory();\r\n    var len = 3;\r\n    for (var i = 0; i < len; i++) {\r\n      var item = {value: \"0\"};\r\n      this.tab.push(item);\r\n    }\r\n  },\r\n  methods:{\r\n    load(){\r\n      axios.get(baseURL+\"/products/product/\"+this.productId).then(\r\n          res=>{\r\n            this.productInfo=res.data.data.product;\r\n            this.productSku=res.data.data.productSku;\r\n            this.productImgs=res.data.data.productImgs;\r\n            //eval将json格式转化为Map键值对格式\r\n            this.skuProps=eval(\"(\"+this.productSku[this.currentSkuIndex].untitled+\")\");\r\n          }\r\n      )\r\n    },\r\n    recur(data){\r\n      for(let i=0;i<data.length;i++){\r\n        for (let j=0;j<data[i].districts.length;j++){\r\n          for (let k=0;k<data[i].districts[j].districts.length;k++){\r\n            data[i].districts[j].districts[k].districts=undefined\r\n          }\r\n\r\n        }\r\n      }\r\n      return data\r\n    },\r\n    changeSku(val){\r\n        this.currentSkuIndex=val\r\n      //eval将json格式转化为Map键值对格式\r\n      this.skuProps=eval(\"(\"+this.productSku[this.currentSkuIndex].untitled+\")\");\r\n    },\r\n    changeImg(val){\r\n      this.currentImgIndex=val\r\n    },\r\n    changeKey(val,e){\r\n      skuMaps.set(e,val)\r\n    },\r\n    addList(){\r\n      var a=\"\"\r\n      for (let keys of skuMaps.keys()){\r\n        a+=keys+\":\"+skuMaps.get(keys)+\";\";\r\n      }\r\n      var carts={\r\n        \"cartNum\":this.num,\r\n        \"productId\":this.productId,\r\n        \"productPrice\":this.productSku[this.currentSkuIndex].sellPrice,\r\n        \"skuId\":this.productSku[this.currentSkuIndex].skuId,\r\n        \"skuProps\":a,\r\n        \"userId\":localStorage.getItem(\"userId\"),\r\n      }\r\n      var token=localStorage.getItem(\"token\")\r\n      axios.post(baseURL+\"/shopping-cart/add\",carts,{headers:{\r\n          token:token}}).then(res=>{\r\n            if (res.data.code==10000){\r\n              this.$message.success(res.data.msg)\r\n            }\r\n            if(res.data.code==10001){\r\n              this.$message.error(res.data.msg)\r\n              router.push({\r\n                path: '/login',\r\n                query:{\r\n                  redirect: router.currentRoute.fullPath  // 防止从外部进来登录\r\n                }\r\n              })\r\n            }\r\n          })\r\n    },\r\n    submit(){\r\n      var a=\"\"\r\n      for (let keys of skuMaps.keys()){\r\n        a+=keys+\":\"+skuMaps.get(keys)+\";\";\r\n      }\r\n      var carts={\r\n        \"cartNum\":this.num,\r\n        \"productId\":this.productId,\r\n        \"productPrice\":this.productSku[this.currentSkuIndex].sellPrice,\r\n        \"skuId\":this.productSku[this.currentSkuIndex].skuId,\r\n        \"skuProps\":a,\r\n        \"userId\":localStorage.getItem(\"userId\"),\r\n      }\r\n      var token=localStorage.getItem(\"token\")\r\n      axios.post(baseURL+\"/shopping-cart/add\",carts,{headers:{\r\n          token:token}}).then(res=>{\r\n            if (res.data.code==10000){\r\n              this.$router.push(\"/order?cids=\"+res.data.data)\r\n            }\r\n            if(res.data.code==10001) {\r\n              this.$message.error(res.data.msg)\r\n              router.push({\r\n                path: '/login',\r\n                query: {\r\n                  redirect: router.currentRoute.fullPath  // 防止从外部进来登录\r\n                }\r\n              })\r\n            }\r\n      })\r\n    },\r\n    addHistory(){\r\n      var history={\r\n        \"productId\":this.productId,\r\n        \"userId\":localStorage.getItem(\"userId\"),\r\n      }\r\n      axios.post(baseURL+\"/history/insert\",history)\r\n    },\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}