{"remainingRequest":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xiaomi\\vue\\src\\views\\Remark.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\xiaomi\\vue\\src\\views\\Remark.vue","mtime":1684853306342},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZpIGZyb20gIi4uL2NvbXBvbmVudHMvTmF2aSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7YmFzZVVSTH0gZnJvbSAiLi4vLi4vcHVibGljL3VybENvbmZpZyI7CmxldCBhPXt9CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVtYXJrIiwKICBjb21wb25lbnRzOiB7TmF2aX0sCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBhY3Rpb246IiIsCiAgICAgIHByb2R1Y3RJZDoiIiwKICAgICAgbGltaXQ6NSwKICAgICAgaXNBbm9ueW1vdXM6IjAiLAogICAgICBkaWFsb2dJbWFnZVVybDogJycsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICB1c2VySWQ6IiIsCiAgICAgIHZhbHVlOm51bGwsCiAgICAgIHRleHRhcmVhOiIiLAogICAgICBwcm9kdWN0TmFtZToiIiwKICAgICAgY29udGVudDoiIiwKICAgICAgcHJvZHVjdEltZzoiIiwKICAgICAgY29tbWVudEltZzpbXSwKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmFjdGlvbj1iYXNlVVJMCiAgICB0aGlzLnByb2R1Y3RJZD10aGlzLiRyb3V0ZS5xdWVyeS5waWQ7CiAgICB0aGlzLnVzZXJJZD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIikKICAgIHRoaXMubG9hZCgpCiAgfSwKICBtZXRob2RzOnsKICAgIGxvYWQoKXsKICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi9wcm9kdWN0cy9wcm9kdWN0LyIrdGhpcy5wcm9kdWN0SWQpLnRoZW4oCiAgICAgICAgICByZXM9PnsKICAgICAgICAgICAgdGhpcy5wcm9kdWN0TmFtZT1yZXMuZGF0YS5kYXRhLnByb2R1Y3QucHJvZHVjdE5hbWUKICAgICAgICAgICAgdGhpcy5jb250ZW50PXJlcy5kYXRhLmRhdGEucHJvZHVjdC5jb250ZW50CiAgICAgICAgICAgIHRoaXMucHJvZHVjdEltZz1yZXMuZGF0YS5kYXRhLnByb2R1Y3RJbWdzWzBdLnVybAogICAgICAgICAgfQogICAgICApCiAgICB9LAogICAgaGFuZGxlU3VjY2VzcyhyZXNwb25zZSxmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmNvbW1lbnRJbWcucHVzaChyZXNwb25zZSkKICAgICAgYT17CiAgICAgICAgaW1nOnRoaXMuY29tbWVudEltZwogICAgICB9CiAgICB9LAogICAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGNvbW1lbnQoKXsKICAgICAgbGV0IGNvbW1lbnQ9ewogICAgICAgICAgImNvbW1JbWdzIjpKU09OLnN0cmluZ2lmeShhKSwKICAgICAgICAiY29tbUNvbnRlbnQiOnRoaXMudGV4dGFyZWEsCiAgICAgICAgImNvbW1MZXZlbCI6dGhpcy52YWx1ZSwKICAgICAgICAiaXNBbm9ueW1vdXMiOnRoaXMuaXNBbm9ueW1vdXMsCiAgICAgICAgInByb2R1Y3RJZCI6dGhpcy5wcm9kdWN0SWQsCiAgICAgICAgInByb2R1Y3ROYW1lIjp0aGlzLnByb2R1Y3ROYW1lLAogICAgICAgICJ1c2VySWQiOnRoaXMudXNlcklkLAogICAgICB9CiAgICAgIGF4aW9zLnBvc3QoYmFzZVVSTCsiL3Byb2R1Y3QtY29tbWVudHMvbWFrZUNvbW1lbnQiLGNvbW1lbnQpLnRoZW4oCiAgICAgICAgICByZXM9PnsKICAgICAgICAgICAgaWYocmVzLmRhdGEuY29kZT09PTEwMDAwKXRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tc2cpCiAgICAgICAgICAgIGVsc2UgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpCiAgICAgICAgICB9CiAgICAgICkKICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi9vcmRlci1pdGVtL3VwZGF0ZUNvbW1lbnQiLHsKICAgICAgICBwYXJhbXM6ewogICAgICAgICAgIml0ZW1JZCI6bG9jYWxTdG9yYWdlLmdldEl0ZW0oIml0ZW1faWQiKSwKICAgICAgICAgICJpc0NvbW1lbnQiOjEKICAgICAgICB9LAogICAgICAgIGhlYWRlcnM6ewogICAgICAgICAgInRva2VuIjpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICAgIH0KICAgICAgfSkudGhlbigpCiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJpdGVtX2lkIikKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Remark.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Remark.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div>\n  <Navi/>\n  <div>\n    <el-row STYLE=\"width: 80%;margin: 0 auto\">\n      <el-col :span=\"8\"style=\"padding: 50px\">\n        <el-row >\n          <router-link :to=\"{name:'Product',query:{pid:productId}}\">\n            <img :src=\"'http://localhost:9090/img/'+productImg\" style=\"width: 200px\"></img></router-link>\n        </el-row>\n        <el-row>\n          <el-link :href=\"'product?pid='+productId\" :underline=\"false\">\n            <span>{{productName}}</span>\n          </el-link>\n        </el-row>\n        <el-row>\n          <span style=\"font-size: 10px;color: rgb(173,173,173)\">{{content}}</span>\n        </el-row>\n      </el-col>\n      <el-col :span=\"16\" style=\"padding: 50px\">\n        <el-row>\n          <el-rate\n              v-model=\"value\" show-text style=\"float: left\"\n              :colors=\"['#99A9BF', '#F7BA2A', '#FF9900']\">1\n          </el-rate>\n        </el-row>\n        <el-row>\n          <el-input\n              type=\"textarea\"\n              placeholder=\"亲，写点评价吧，你的评价对其他买家有很大帮助的。\"\n              v-model=\"textarea\"\n              maxlength=\"255\"\n              show-word-limit\n          >\n          </el-input>\n        </el-row>\n        <el-row>\n          <el-upload\n              :action=\"action+'/product-comments/upload'\"\n              list-type=\"picture-card\" :limit=\"limit\" :on-success=\"handleSuccess\"\n              :on-preview=\"handlePictureCardPreview\" style=\"float: left\">\n            <i class=\"el-icon-plus\"></i>\n          </el-upload>\n          <el-dialog :visible.sync=\"dialogVisible\">\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n          </el-dialog>\n        </el-row>\n        <el-row>\n          <template>\n            <el-radio v-model=\"isAnonymous\" label=\"0\">公开</el-radio>\n            <el-radio v-model=\"isAnonymous\" label=\"1\">匿名</el-radio>\n            <el-button @click=\"comment\">发表评论</el-button>\n          </template>\n        </el-row>\n      </el-col>\n    </el-row>\n  </div>\n</div>\n</template>\n\n<script>\nimport Navi from \"../components/Navi\";\nimport axios from \"axios\";\nimport {baseURL} from \"../../public/urlConfig\";\nlet a={}\nexport default {\n  name: \"Remark\",\n  components: {Navi},\n  data(){\n    return{\n      action:\"\",\n      productId:\"\",\n      limit:5,\n      isAnonymous:\"0\",\n      dialogImageUrl: '',\n      dialogVisible: false,\n      userId:\"\",\n      value:null,\n      textarea:\"\",\n      productName:\"\",\n      content:\"\",\n      productImg:\"\",\n      commentImg:[],\n    }\n  },\n  created() {\n    this.action=baseURL\n    this.productId=this.$route.query.pid;\n    this.userId=localStorage.getItem(\"userId\")\n    this.load()\n  },\n  methods:{\n    load(){\n      axios.get(baseURL+\"/products/product/\"+this.productId).then(\n          res=>{\n            this.productName=res.data.data.product.productName\n            this.content=res.data.data.product.content\n            this.productImg=res.data.data.productImgs[0].url\n          }\n      )\n    },\n    handleSuccess(response,file, fileList) {\n      this.commentImg.push(response)\n      a={\n        img:this.commentImg\n      }\n    },\n    handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    comment(){\n      let comment={\n          \"commImgs\":JSON.stringify(a),\n        \"commContent\":this.textarea,\n        \"commLevel\":this.value,\n        \"isAnonymous\":this.isAnonymous,\n        \"productId\":this.productId,\n        \"productName\":this.productName,\n        \"userId\":this.userId,\n      }\n      axios.post(baseURL+\"/product-comments/makeComment\",comment).then(\n          res=>{\n            if(res.data.code===10000)this.$message.success(res.data.msg)\n            else this.$message.error(res.data.msg)\n          }\n      )\n      axios.get(baseURL+\"/order-item/updateComment\",{\n        params:{\n          \"itemId\":localStorage.getItem(\"item_id\"),\n          \"isComment\":1\n        },\n        headers:{\n          \"token\":localStorage.getItem(\"token\")\n        }\n      }).then()\n      localStorage.removeItem(\"item_id\")\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"]}]}