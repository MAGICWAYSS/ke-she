{"remainingRequest":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xiaomi\\vue\\src\\views\\Order.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\xiaomi\\vue\\src\\views\\Order.vue","mtime":1685282428226},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHtiYXNlVVJMfSBmcm9tICIuLi8uLi9wdWJsaWMvdXJsQ29uZmlnIjsNCmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsNCmltcG9ydCBBZGRyZXNzIGZyb20gIi4uL2NvbXBvbmVudHMvQWRkcmVzcyI7DQpsZXQgdG9rZW49bG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIk9yZGVyIiwNCiAgY29tcG9uZW50czoge0FkZHJlc3N9LA0KICBkYXRhKCl7DQogICAgcmV0dXJuew0KICAgICAgdXNlcm5hbWU6bG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIiksDQogICAgICBpbWc6bG9jYWxTdG9yYWdlLmdldEl0ZW0oImltZyIpLA0KICAgICAgdXNlcklkOmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKSwNCiAgICAgIGNpZHM6W10sDQogICAgICB1c2VyQWRkcjpbXSwNCiAgICAgIHByb2R1Y3RMaXN0OltdLA0KICAgICAgc3VtOjAsDQogICAgICBhZGRySW5kZXg6MCwNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwNCiAgICAgIGZvcm1MYWJlbFdpZHRoOiAnMTIwcHgnLA0KICAgICAgZm9ybTogew0KICAgICAgICB1c2VySWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKSwNCiAgICAgICAgcmVjZWl2ZXJOYW1lOiAnJywNCiAgICAgICAgcmVjZWl2ZXJNb2JpbGU6ICcnLA0KICAgICAgICBwcm92aW5jZTogJycsDQogICAgICAgIGNpdHk6IiIsDQogICAgICAgIGFyZWE6ICIiLA0KICAgICAgICBhZGRyOiAnJywNCiAgICAgICAgcG9zdENvZGU6ICcnLA0KICAgICAgICBzdGF0dXM6MSwNCiAgICAgICAgY29tbW9uQWRkcjowLA0KICAgICAgfSwNCiAgICAgIG9yZGVyaWQ6IiIsDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuY2lkcz10aGlzLiRyb3V0ZS5xdWVyeS5jaWRzDQogICAgdGhpcy5sb2FkKCkNCiAgfSwNCiAgbWV0aG9kczp7DQogICAgbG9hZCgpew0KICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi91c2VyLWFkZHIvYWRkci8iK3RoaXMudXNlcklkKS50aGVuKA0KICAgICAgICAgIHJlcz0+e3RoaXMudXNlckFkZHI9cmVzLmRhdGENCiAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpPHRoaXMudXNlckFkZHIubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICBpZih0aGlzLnVzZXJBZGRyW2ldLmNvbW1vbkFkZHIgPT0gMSl7DQogICAgICAgICAgICAgICAgdGhpcy5hZGRySW5kZXggPSBpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgKQ0KICAgICAgbGV0IHM9IiINCiAgICAgIGF4aW9zLnBvc3QoYmFzZVVSTCsiL3Nob3BwaW5nLWNhcnQvbGlzdEJ5Q2FydElkIixzPSB0aGlzLmNpZHMuc3BsaXQoIiwiKSx7DQogICAgICAgIGhlYWRlcnM6e3Rva2VuOnRva2VufX0pLnRoZW4oDQogICAgICAgICAgcmVzPT57dGhpcy5wcm9kdWN0TGlzdD1yZXMuZGF0YQ0KICAgICAgICAgICAgbGV0IGE9dGhpcy5wcm9kdWN0TGlzdA0KICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxhLmxlbmd0aDtpKyspew0KICAgICAgICAgICAgICB0aGlzLnN1bSs9YVtpXS5zZWxsUHJpY2UqYVtpXS5jYXJ0TnVtDQogICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICApDQogICAgfSwNCiAgICBjaGlsZGNsaWNrKGl0ZW0pew0KICAgICAgdGhpcy51c2VyQWRkcj1pdGVtDQogICAgICB0aGlzLmxvYWQoKQ0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZT1mYWxzZQ0KICAgIH0sDQogICAgbG9nb3V0KCkgew0KICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXJuYW1lIikNCiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJpbWciKQ0KICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInRva2VuIikNCiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VySWQiKQ0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLpgIDlh7rmiJDlip8iKQ0KICAgICAgdGhpcy51c2VybmFtZT0iIg0KICAgIH0sDQogICAgcGVyc29uKCl7DQogICAgICB0aGlzLnVzZXJuYW1lPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VybmFtZSIpDQogICAgICByb3V0ZXIucHVzaCgiL3BlcnNvbiIpDQogICAgfSwNCiAgICBsb2dpbigpew0KICAgICAgcm91dGVyLnB1c2goew0KICAgICAgICBwYXRoOiAnL2xvZ2luJywNCiAgICAgICAgcXVlcnk6ew0KICAgICAgICAgIHJlZGlyZWN0OiByb3V0ZXIuY3VycmVudFJvdXRlLmZ1bGxQYXRoICAvLyDpmLLmraLku47lpJbpg6jov5vmnaXnmbvlvZUNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGFkZE9yZGVyKCl7DQogICAgICB2YXIgb3JkZXIgPSB7DQogICAgICAgICJhY3R1YWxBbW91bnQiOiB0aGlzLnN1bSwNCiAgICAgICAgIm9yZGVyUmVtYXJrIjogdGhpcy5vcmRlclJlbWFyaywNCiAgICAgICAgInJlY2VpdmVyQWRkcmVzcyI6ICB0aGlzLnVzZXJBZGRyW3RoaXMuYWRkckluZGV4XS5wcm92aW5jZSArICIgIiArdGhpcy51c2VyQWRkclt0aGlzLmFkZHJJbmRleF0uY2l0eSsiICINCiAgICAgICAgICAgICt0aGlzLnVzZXJBZGRyW3RoaXMuYWRkckluZGV4XS5hcmVhKyIgIiArdGhpcy51c2VyQWRkclt0aGlzLmFkZHJJbmRleF0uYWRkciwNCiAgICAgICAgInJlY2VpdmVyTW9iaWxlIjogdGhpcy51c2VyQWRkclt0aGlzLmFkZHJJbmRleF0ucmVjZWl2ZXJNb2JpbGUsDQogICAgICAgICJyZWNlaXZlck5hbWUiOiB0aGlzLnVzZXJBZGRyW3RoaXMuYWRkckluZGV4XS5yZWNlaXZlck5hbWUsDQogICAgICAgICJ0b3RhbEFtb3VudCI6IHRoaXMuc3VtLA0KICAgICAgICAidXNlcklkIjogdGhpcy51c2VySWQNCiAgICAgIH07DQogICAgICBheGlvcy5wb3N0KGJhc2VVUkwrIi9vcmRlcnMvYWRkIixvcmRlcix7DQogICAgICAgIGhlYWRlcnM6ew0KICAgICAgICAgIHRva2VuOmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpDQogICAgICAgIH0sDQogICAgICAgIHBhcmFtczp7DQogICAgICAgICAgY2FydElkOiB0aGlzLmNpZHMNCiAgICAgICAgfSx9KS50aGVuKChyZXMpPT57DQogICAgICAgICAgZG9jdW1lbnQud3JpdGUocmVzLmRhdGEpDQovKiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3BheVN1Y2Nlc3M/b3JkZXJJZD0iK3Jlcy5kYXRhLmRhdGEpKi8NCiAgICAgIH0pOw0KICAgIH0sDQogIH0NCn0NCg=="},{"version":3,"sources":["Order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Order.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"background-color: #F5F5F5;\">\r\n      <el-row style=\"width: 80%;margin: 0 auto\">\r\n        <el-col :span=\"12\" style=\"margin-top: 5px;margin-bottom: 5px\">\r\n          <div v-if=!username style=\"float: left\">\r\n            <el-link :underline=\"false\" @click=\"login\">登录</el-link>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n            <el-link :underline=\"false\" href=\"/register\">注册</el-link>\r\n            <!--            <el-link @click=\"up\">更新状态</el-link>-->\r\n          </div>\r\n          <div v-else style=\"float: left\">\r\n            <el-dropdown>\r\n              <span class=\"el-dropdown-link\">\r\n                <el-link :underline=\"false\" href=\"/person\" icon=\"el-icon-user-solid\">{{ username }}</el-link> <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n              </span>\r\n              <el-dropdown-menu slot=\"dropdown\">\r\n                <el-dropdown-item style=\"width: 150px;height: 60px\">\r\n                  <el-row :gutter=\"20\">\r\n                    <el-col :span=\"8\"><el-avatar :src=\"'http://localhost:9090/img/'+img\" style=\"margin-top: 5px\"></el-avatar></el-col>\r\n                    <el-col :span=\"16\">\r\n                      <el-link :underline=\"false\" href=\"/person\">个人中心</el-link>\r\n                      <el-link :underline=\"false\" @click=\"logout\" >退出登录</el-link>\r\n                    </el-col>\r\n                  </el-row>\r\n                </el-dropdown-item>\r\n              </el-dropdown-menu>\r\n            </el-dropdown>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"12\"style=\"margin-top: 5px;margin-bottom: 5px\">\r\n          <div style=\"float: right;\">\r\n            <el-link :underline=\"false\" href=\"/\">商城首页</el-link>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n            <el-link :underline=\"false\" href=\"/login\">我的订单</el-link>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n            <el-link :underline=\"false\" :href=\"'/shopcart?uid='+userId\" icon=\"el-icon-shopping-cart-2\">我的购物车</el-link>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n            <el-link :underline=\"false\" href=\"/addProduct\">商家后台</el-link>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n            <el-link :underline=\"false\" href=\"/history\">我的足迹</el-link>\r\n\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <el-row style=\"width: 80%;margin: 0 auto;top: 10px\">\r\n      <el-col :span=\"8\">\r\n        <el-link href=\"/\" style=\"float: left\" :underline=\"false\">\r\n          <img src=\"../assets/logo.png\"  width=\"130px\" >\r\n        </el-link>\r\n      </el-col>\r\n      <el-col :span=\"16\">\r\n        <el-steps :active=\"1\" align-center style=\"\">\r\n          <el-step title=\"步骤1\" description=\"购物车结算\"></el-step>\r\n          <el-step title=\"步骤2\" description=\"核对订单信息\"></el-step>\r\n          <el-step title=\"步骤3\" description=\"成功提交订单\"></el-step>\r\n        </el-steps>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row style=\"width: 80%;margin: 0 auto;padding-top: 10px\"><h4 style=\"float: left\">选择收货地址</h4></el-row>\r\n    <el-row style=\"width: 80%;margin: 0 auto;padding: 10px\" v-if=\"userAddr!==undefined&&userAddr.length>0\">\r\n      <el-radio-group style=\"float: left;margin: 5px;\" v-model=\"addrIndex\" v-for=\"(item,ind) in userAddr\">\r\n        <el-radio-button  style=\"margin: 5px\" :label=\"ind\">\r\n          <el-descriptions   border>\r\n            <el-descriptions-item label=\"收货人\">{{item.receiverName}}</el-descriptions-item>\r\n            <el-descriptions-item label=\"手机号\">{{item.receiverMobile}}</el-descriptions-item>\r\n            <el-descriptions-item label=\"省市\">{{item.province}} {{item.city}}</el-descriptions-item>\r\n            <el-descriptions-item label=\"地址\">{{item.area}}{{item.addr}}</el-descriptions-item>\r\n            <el-descriptions-item label=\"邮编\">{{item.postCode}}</el-descriptions-item>\r\n          </el-descriptions>\r\n        </el-radio-button>\r\n      </el-radio-group>\r\n\r\n    </el-row>\r\n    <el-row style=\"width: 80%;margin: 0 auto;padding: 10px\">\r\n      <el-button type=\"text\" @click=\"dialogFormVisible = true\" style=\"float: left\">添加新地址</el-button>\r\n    </el-row>\r\n    <el-dialog title=\"收货地址\" :visible.sync=\"dialogFormVisible\">\r\n      <Address :user-addr=\"userAddr\" @itemclick=\"childclick\"></Address>\r\n    </el-dialog>\r\n    <el-row style=\"width: 80%;margin: 0 auto;padding: 10px\"><h4 style=\"float: left\">确认订单信息</h4></el-row>\r\n    <el-row>\r\n      <el-table\r\n          v-loading=\"loading\"\r\n          element-loading-text=\"拼命加载中\"\r\n          element-loading-spinner=\"el-icon-loading\"\r\n          element-loading-background=\"rgba(0, 0, 0, 0.8)\"\r\n          :data=\"productList\"\r\n          style=\"width: 80%;margin: 0 auto;\">\r\n        <el-table-column type=\"expand\">\r\n          <template slot-scope=\"props\">\r\n            <el-form inline style=\"font-size:0;margin-left: 5px;margin-bottom: 0;color:rgb(102,120,180)\" >\r\n              <el-form-item label=\"商品ID：\">\r\n                <span>{{ props.row.productId }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"商品名称：\">\r\n                <span>{{ props.row.productName }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"套餐名：\">\r\n                <span>{{ props.row.skuName }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"套餐属性：\">\r\n                <span>{{ props.row.skuProps }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"原价：\">\r\n                <span>¥{{ props.row.originalPrice}}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"创建时间：\">\r\n                <span>{{ props.row.cartTime }}</span>\r\n              </el-form-item>\r\n            </el-form>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"图片\">\r\n          <template slot-scope=\"scope\">\r\n            <router-link :to=\"{name:'Product',query:{pid:scope.row.productId}}\">\r\n              <el-image :src=\"'http://localhost:9090/img/'+scope.row.url\" fit=\"fill\" style=\"width: 40px\"></el-image>\r\n            </router-link>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"商品名称\"\r\n            prop=\"productName\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"商品属性\"\r\n            prop=\"skuProps\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"单价\"\r\n            prop=\"sellPrice\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"数量\"\r\n            prop=\"cartNum\">\r\n        </el-table-column>\r\n        <el-table-column label=\"总计\" width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            <em style=\"font-size:16px;font-weight: 700; color: #c81623\">¥{{scope.row.sellPrice*scope.row.cartNum}}</em>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-row>\r\n    <el-row style=\"width: 80%;margin: 0 auto;padding-top: 10px\">\r\n      <el-card shadow=\"hover\" body-style=\"border-radius: 2px\" style=\"width: 450px;height: 130px;float: right\" v-if=\"userAddr!==undefined&&userAddr.length>0\">\r\n        <el-row style=\"float: right;width: 450px\">\r\n          <div style=\"float: right\">\r\n            <b>实付款：</b>\r\n            <em style=\"font-size:35px;font-weight: 700; color: #c81623\">¥{{sum}}</em>\r\n          </div>\r\n        </el-row >\r\n        <el-row style=\"float: right;width: 450px\">\r\n          <div style=\"float: right\">\r\n            <b>寄送至：</b>\r\n            <em style=\"font-weight: 700; \">\r\n              {{\r\n                userAddr[addrIndex].province + \"省\" + userAddr[addrIndex].city + \"市\"\r\n                + userAddr[addrIndex].area + \" \" + userAddr[addrIndex].addr\r\n              }}\r\n            </em>\r\n          </div>\r\n        </el-row>\r\n        <el-row style=\"float: right;width: 450px\">\r\n          <div style=\"float: right\">\r\n            <b>收件人：</b>\r\n            <em style=\"font-weight: 700; \">\r\n              {{userAddr[addrIndex].receiverName + \" \"+userAddr[addrIndex].receiverMobile}}\r\n            </em>\r\n          </div>\r\n        </el-row>\r\n      </el-card>\r\n    </el-row>\r\n    <el-row style=\"width: 80%;margin: 0 auto;padding-top: 10px\">\r\n      <el-button style=\"background-color: rgb(255,0,54);color: white;float: right\" @click=\"addOrder\">提交订单</el-button>\r\n    </el-row>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport {baseURL} from \"../../public/urlConfig\";\r\nimport router from \"../router\";\r\nimport Address from \"../components/Address\";\r\nlet token=localStorage.getItem(\"token\")\r\nexport default {\r\n  name: \"Order\",\r\n  components: {Address},\r\n  data(){\r\n    return{\r\n      username:localStorage.getItem(\"username\"),\r\n      img:localStorage.getItem(\"img\"),\r\n      userId:localStorage.getItem(\"userId\"),\r\n      cids:[],\r\n      userAddr:[],\r\n      productList:[],\r\n      sum:0,\r\n      addrIndex:0,\r\n      dialogFormVisible: false,\r\n      formLabelWidth: '120px',\r\n      form: {\r\n        userId: localStorage.getItem(\"userId\"),\r\n        receiverName: '',\r\n        receiverMobile: '',\r\n        province: '',\r\n        city:\"\",\r\n        area: \"\",\r\n        addr: '',\r\n        postCode: '',\r\n        status:1,\r\n        commonAddr:0,\r\n      },\r\n      orderid:\"\",\r\n    }\r\n  },\r\n  created() {\r\n    this.cids=this.$route.query.cids\r\n    this.load()\r\n  },\r\n  methods:{\r\n    load(){\r\n      axios.get(baseURL+\"/user-addr/addr/\"+this.userId).then(\r\n          res=>{this.userAddr=res.data\r\n            for(var i=0; i<this.userAddr.length; i++){\r\n              if(this.userAddr[i].commonAddr == 1){\r\n                this.addrIndex = i;\r\n              }\r\n            }\r\n          }\r\n      )\r\n      let s=\"\"\r\n      axios.post(baseURL+\"/shopping-cart/listByCartId\",s= this.cids.split(\",\"),{\r\n        headers:{token:token}}).then(\r\n          res=>{this.productList=res.data\r\n            let a=this.productList\r\n            for(let i=0;i<a.length;i++){\r\n              this.sum+=a[i].sellPrice*a[i].cartNum\r\n            }\r\n            }\r\n      )\r\n    },\r\n    childclick(item){\r\n      this.userAddr=item\r\n      this.load()\r\n      this.dialogFormVisible=false\r\n    },\r\n    logout() {\r\n      localStorage.removeItem(\"username\")\r\n      localStorage.removeItem(\"img\")\r\n      localStorage.removeItem(\"token\")\r\n      localStorage.removeItem(\"userId\")\r\n      this.$message.success(\"退出成功\")\r\n      this.username=\"\"\r\n    },\r\n    person(){\r\n      this.username=localStorage.getItem(\"username\")\r\n      router.push(\"/person\")\r\n    },\r\n    login(){\r\n      router.push({\r\n        path: '/login',\r\n        query:{\r\n          redirect: router.currentRoute.fullPath  // 防止从外部进来登录\r\n        }\r\n      })\r\n    },\r\n    addOrder(){\r\n      var order = {\r\n        \"actualAmount\": this.sum,\r\n        \"orderRemark\": this.orderRemark,\r\n        \"receiverAddress\":  this.userAddr[this.addrIndex].province + \" \" +this.userAddr[this.addrIndex].city+\" \"\r\n            +this.userAddr[this.addrIndex].area+\" \" +this.userAddr[this.addrIndex].addr,\r\n        \"receiverMobile\": this.userAddr[this.addrIndex].receiverMobile,\r\n        \"receiverName\": this.userAddr[this.addrIndex].receiverName,\r\n        \"totalAmount\": this.sum,\r\n        \"userId\": this.userId\r\n      };\r\n      axios.post(baseURL+\"/orders/add\",order,{\r\n        headers:{\r\n          token:localStorage.getItem(\"token\")\r\n        },\r\n        params:{\r\n          cartId: this.cids\r\n        },}).then((res)=>{\r\n          document.write(res.data)\r\n/*          this.$router.push(\"/paySuccess?orderId=\"+res.data.data)*/\r\n      });\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}