{"remainingRequest":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xiaomi\\vue\\src\\views\\Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\xiaomi\\vue\\src\\views\\Search.vue","mtime":1685282428226},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHtiYXNlVVJMfSBmcm9tICIuLi8uLi9wdWJsaWMvdXJsQ29uZmlnIjsNCmltcG9ydCBOYXZpIGZyb20gIi4uL2NvbXBvbmVudHMvTmF2aSI7DQppbXBvcnQgcm91dGVyIGZyb20gIi4uL3JvdXRlciI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlNlYXJjaCIsDQogIGNvbXBvbmVudHM6IHtOYXZpfSwNCiAgZGF0YSgpew0KICAgIHJldHVybnsNCiAgICAgIGNpZDoiIiwNCiAgICAgIHBhZ2VOdW06MSwNCiAgICAgIHBhZ2VTaXplOjIsDQogICAgICByZXN1bHQ6W10sDQogICAgICB0b3RhbDowLA0KICAgICAga2V5d29yZDoiIiwNCiAgICAgIHVzZXJuYW1lOmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VybmFtZSIpLA0KICAgICAgaW1nOmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpbWciKSwNCiAgICAgIHVzZXJJZDpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIiksDQogICAgICBpbnB1dDoiIiwNCiAgICAgIHNlbGVjdDoiIiwNCiAgICB9DQogIH0sDQogIGZpbHRlcnM6IHsNCiAgICBjdXQodmFsdWUpew0KICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuICLllYblk4HlkI3kuLrnqboiOw0KICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IDEwKSB7DQogICAgICAgIHJldHVybiB2YWx1ZS5zbGljZSgwLCAxMCkgKyAiLi4uIjsNCiAgICAgIH0NCiAgICAgIHJldHVybiB2YWx1ZTsNCiAgICB9LA0KICAgIGVsbGlwc2lzKHZhbHVlKSB7DQogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gIuaaguaXoOivtOaYjiI7DQogICAgICBpZiAodmFsdWUubGVuZ3RoID4gMTMpIHsNCiAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKDAsIDEzKSArICIuLi4iOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHZhbHVlOw0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmNpZD10aGlzLiRyb3V0ZS5xdWVyeS5jaWQNCiAgICB0aGlzLmtleXdvcmQ9dGhpcy4kcm91dGUucXVlcnkua2V5d29yZA0KICAgIHRoaXMubG9hZCgpDQogIH0sDQogIG1ldGhvZHM6ew0KICAgIGxvYWQoKXsNCiAgICAgIGlmKHRoaXMuY2lkIT1udWxsKXsNCiAgICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi9wcm9kdWN0cy9zZWFyY2hDYXRlLyIrdGhpcy5jaWQsew0KICAgICAgICAgIHBhcmFtczp7InBhZ2VOdW0iOnRoaXMucGFnZU51bSwicGFnZVNpemUiOnRoaXMucGFnZVNpemV9DQogICAgICAgIH0pLnRoZW4oDQogICAgICAgICAgICByZXM9PnsNCiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQ9cmVzLmRhdGEucmVjb3Jkcw0KICAgICAgICAgICAgICB0aGlzLnRvdGFsPXJlcy5kYXRhLnRvdGFsDQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2lkKQ0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnJlc3VsdCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgKQ0KICAgICAgfQ0KICAgICAgaWYodGhpcy5rZXl3b3JkIT1udWxsKXsNCiAgICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi9wcm9kdWN0cy9zZWFyY2hOYW1lIix7DQogICAgICAgICAgcGFyYW1zOnsia2V5d29yZCI6dGhpcy5rZXl3b3JkLnRvU3RyaW5nKCksDQogICAgICAgICAgICAicGFnZU51bSI6dGhpcy5wYWdlTnVtLCJwYWdlU2l6ZSI6dGhpcy5wYWdlU2l6ZX0NCiAgICAgICAgfSkudGhlbigNCiAgICAgICAgICAgIHJlcz0+ew0KICAgICAgICAgICAgICB0aGlzLnJlc3VsdD1yZXMuZGF0YS5yZWNvcmRzDQogICAgICAgICAgICAgIHRoaXMudG90YWw9cmVzLmRhdGEudG90YWwNCiAgICAgICAgICAgIH0NCiAgICAgICAgKQ0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlU2l6ZUNoYW5nZShwYWdlU2l6ZSkgew0KICAgICAgdGhpcy5wYWdlU2l6ZSA9IHBhZ2VTaXplDQogICAgICB0aGlzLmxvYWQoKQ0KICAgIH0sDQogICAgaGFuZGxlQ3VycmVudENoYW5nZShwYWdlTnVtKSB7DQogICAgICB0aGlzLnBhZ2VOdW0gPSBwYWdlTnVtDQogICAgICB0aGlzLmxvYWQoKQ0KICAgIH0sDQogICAgbG9nb3V0KCkgew0KICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXJuYW1lIikNCiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJpbWciKQ0KICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInRva2VuIikNCiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VySWQiKQ0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLpgIDlh7rmiJDlip8iKQ0KICAgICAgdGhpcy51c2VybmFtZT0iIg0KICAgIH0sDQogICAgcGVyc29uKCl7DQogICAgICB0aGlzLnVzZXJuYW1lPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VybmFtZSIpDQogICAgICByb3V0ZXIucHVzaCgiL3BlcnNvbiIpDQogICAgfSwNCiAgICBsb2dpbigpew0KICAgICAgcm91dGVyLnB1c2goew0KICAgICAgICBwYXRoOiAnL2xvZ2luJywNCiAgICAgICAgcXVlcnk6ew0KICAgICAgICAgIHJlZGlyZWN0OiByb3V0ZXIuY3VycmVudFJvdXRlLmZ1bGxQYXRoICAvLyDpmLLmraLku47lpJbpg6jov5vmnaXnmbvlvZUNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGZ1enp5UXVlcnkoKXsNCiAgICAgIGF4aW9zLmdldChiYXNlVVJMKyIvcHJvZHVjdHMvc2VhcmNoTmFtZSIsew0KICAgICAgICBwYXJhbXM6eyJrZXl3b3JkIjp0aGlzLmlucHV0LA0KICAgICAgICAgICJwYWdlTnVtIjp0aGlzLnBhZ2VOdW0sInBhZ2VTaXplIjp0aGlzLnBhZ2VTaXplfQ0KICAgICAgfSkudGhlbigNCiAgICAgICAgICByZXM9PnsNCiAgICAgICAgICAgIHRoaXMucmVzdWx0PXJlcy5kYXRhLnJlY29yZHMNCiAgICAgICAgICAgIHRoaXMudG90YWw9cmVzLmRhdGEudG90YWwNCiAgICAgICAgICB9DQogICAgICApDQogICAgfSwNCiAgICBzZWFyY2godil7DQogICAgICBheGlvcy5nZXQoYmFzZVVSTCsiL3Byb2R1Y3RzL3NlYXJjaE5hbWUiLHsNCiAgICAgICAgcGFyYW1zOnsia2V5d29yZCI6diwNCiAgICAgICAgICAicGFnZU51bSI6dGhpcy5wYWdlTnVtLCJwYWdlU2l6ZSI6dGhpcy5wYWdlU2l6ZX0NCiAgICAgIH0pLnRoZW4oDQogICAgICAgICAgcmVzPT57DQogICAgICAgICAgICB0aGlzLnJlc3VsdD1yZXMuZGF0YS5yZWNvcmRzDQogICAgICAgICAgICB0aGlzLnRvdGFsPXJlcy5kYXRhLnRvdGFsDQogICAgICAgICAgfQ0KICAgICAgKQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div>\r\n  <div>\r\n    <div style=\"background-color: #F5F5F5;\">\r\n      <el-row style=\"width: 80%;margin: 0 auto\">\r\n        <el-col :span=\"12\" style=\"margin-top: 5px;margin-bottom: 5px\">\r\n          <div v-if=!username style=\"float: left\">\r\n            <el-link :underline=\"false\" @click=\"login\">登录</el-link>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n            <el-link :underline=\"false\" href=\"/register\">注册</el-link>\r\n            <!--            <el-link @click=\"up\">更新状态</el-link>-->\r\n          </div>\r\n          <div v-else style=\"float: left\">\r\n            <el-dropdown>\r\n              <span class=\"el-dropdown-link\">\r\n                <el-link :underline=\"false\" href=\"/person\">{{ username }}</el-link> <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n              </span>\r\n              <el-dropdown-menu slot=\"dropdown\">\r\n                <el-dropdown-item style=\"width: 150px;height: 60px\">\r\n                  <el-row :gutter=\"20\">\r\n                    <el-col :span=\"8\"><el-avatar :src=\"require(`../img/${img}`)\" style=\"margin-top: 5px\"></el-avatar></el-col>\r\n                    <el-col :span=\"16\">\r\n                      <el-link :underline=\"false\" href=\"/person\">个人中心</el-link>\r\n                      <el-link :underline=\"false\" @click=\"logout\" >退出登录</el-link>\r\n                    </el-col>\r\n                  </el-row>\r\n                </el-dropdown-item>\r\n              </el-dropdown-menu>\r\n            </el-dropdown>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"12\"style=\"margin-top: 5px;margin-bottom: 5px\">\r\n          <div style=\"float: right\">\r\n            <el-link :underline=\"false\" href=\"/\">商城首页</el-link>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n            <el-link :underline=\"false\" :href=\"'/orderList?uid='+userId\" icon=\"el-icon-circle-check\">我的订单</el-link>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n            <el-link :underline=\"false\" :href=\"'/shopcart?uid='+userId\" icon=\"el-icon-shopping-cart-2\">我的购物车</el-link>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n            <el-link :underline=\"false\" href=\"/addProduct\">商家后台</el-link>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n            <el-link :underline=\"false\" href=\"/history\">我的足迹</el-link>\r\n\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <div >\r\n      <el-row style=\"width: 80%;margin: 0 auto\">\r\n        <el-col :span=\"12\" style=\"margin-top: 5px;margin-bottom: 5px\">\r\n          <el-link href=\"/\"style=\"float: left\" :underline=\"false\">\r\n            <img src=\"../assets/logo.png\" width=\"130px\" />\r\n          </el-link>\r\n        </el-col>\r\n        <el-col :span=\"12\" style=\"margin-top: 10px;margin-bottom: 5px\">\r\n          <div style=\"margin-top: 15px;\">\r\n            <el-input placeholder=\"请输入内容\" v-model=\"input\" @change=\"search\">\r\n              <el-button slot=\"append\" icon=\"el-icon-search\" style=\"background-color: #FF5A00;color: white\" @click=\"fuzzyQuery\">搜索</el-button>\r\n            </el-input>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </div>\r\n  <div style=\"width: 80%;margin: 0 auto;\">\r\n    <el-row>\r\n      <el-col :span=\"6\" v-for=\"o in result\" >\r\n        <el-card style=\"border-radius: 15px;margin: 5px\" shadow=\"hover\">\r\n          <el-row>\r\n            <router-link :to=\"{name:'Product',query:{pid:o.productId}}\">\r\n              <img :src=\"require(`../img/${o.url}`)\" style=\"  width: 100%;height: 100%;display: block;\">\r\n            </router-link>\r\n          </el-row>\r\n          <el-row>\r\n            <el-col :span=\"16\" style=\" text-align: left;color: #c81623\">\r\n              <em style=\"font-size:20px;font-weight: 700;\">¥{{o.sellPrice}}</em></el-col>\r\n            <el-col :span=\"8\">\r\n              <em style=\"font-size:10px;color: rgb(173,173,173);float: right\">{{o.soldNum}}人付款</em>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row>\r\n            <router-link :to=\"{name:'Product',query:{pid:o.productId}}\">\r\n              <span style=\"float: left;font-size: 16px;color: #333333\">{{ o.productName|cut}}</span>\r\n            </router-link>\r\n          </el-row>\r\n          <el-row>\r\n            <span style=\"float: left;font-size: 10px;color: rgb(153,153,153)\">{{o.content | ellipsis}}</span>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pageNum\"\r\n        :page-sizes=\"[2, 5, 10, 20]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\">\r\n    </el-pagination>\r\n  </div>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport {baseURL} from \"../../public/urlConfig\";\r\nimport Navi from \"../components/Navi\";\r\nimport router from \"../router\";\r\n\r\nexport default {\r\n  name: \"Search\",\r\n  components: {Navi},\r\n  data(){\r\n    return{\r\n      cid:\"\",\r\n      pageNum:1,\r\n      pageSize:2,\r\n      result:[],\r\n      total:0,\r\n      keyword:\"\",\r\n      username:localStorage.getItem(\"username\"),\r\n      img:localStorage.getItem(\"img\"),\r\n      userId:localStorage.getItem(\"userId\"),\r\n      input:\"\",\r\n      select:\"\",\r\n    }\r\n  },\r\n  filters: {\r\n    cut(value){\r\n      if (!value) return \"商品名为空\";\r\n      if (value.length > 10) {\r\n        return value.slice(0, 10) + \"...\";\r\n      }\r\n      return value;\r\n    },\r\n    ellipsis(value) {\r\n      if (!value) return \"暂无说明\";\r\n      if (value.length > 13) {\r\n        return value.slice(0, 13) + \"...\";\r\n      }\r\n      return value;\r\n    }\r\n  },\r\n  created() {\r\n    this.cid=this.$route.query.cid\r\n    this.keyword=this.$route.query.keyword\r\n    this.load()\r\n  },\r\n  methods:{\r\n    load(){\r\n      if(this.cid!=null){\r\n        axios.get(baseURL+\"/products/searchCate/\"+this.cid,{\r\n          params:{\"pageNum\":this.pageNum,\"pageSize\":this.pageSize}\r\n        }).then(\r\n            res=>{\r\n              this.result=res.data.records\r\n              this.total=res.data.total\r\n              console.log(this.cid)\r\n              console.log(this.result)\r\n            }\r\n        )\r\n      }\r\n      if(this.keyword!=null){\r\n        axios.get(baseURL+\"/products/searchName\",{\r\n          params:{\"keyword\":this.keyword.toString(),\r\n            \"pageNum\":this.pageNum,\"pageSize\":this.pageSize}\r\n        }).then(\r\n            res=>{\r\n              this.result=res.data.records\r\n              this.total=res.data.total\r\n            }\r\n        )\r\n      }\r\n    },\r\n    handleSizeChange(pageSize) {\r\n      this.pageSize = pageSize\r\n      this.load()\r\n    },\r\n    handleCurrentChange(pageNum) {\r\n      this.pageNum = pageNum\r\n      this.load()\r\n    },\r\n    logout() {\r\n      localStorage.removeItem(\"username\")\r\n      localStorage.removeItem(\"img\")\r\n      localStorage.removeItem(\"token\")\r\n      localStorage.removeItem(\"userId\")\r\n      this.$message.success(\"退出成功\")\r\n      this.username=\"\"\r\n    },\r\n    person(){\r\n      this.username=localStorage.getItem(\"username\")\r\n      router.push(\"/person\")\r\n    },\r\n    login(){\r\n      router.push({\r\n        path: '/login',\r\n        query:{\r\n          redirect: router.currentRoute.fullPath  // 防止从外部进来登录\r\n        }\r\n      })\r\n    },\r\n    fuzzyQuery(){\r\n      axios.get(baseURL+\"/products/searchName\",{\r\n        params:{\"keyword\":this.input,\r\n          \"pageNum\":this.pageNum,\"pageSize\":this.pageSize}\r\n      }).then(\r\n          res=>{\r\n            this.result=res.data.records\r\n            this.total=res.data.total\r\n          }\r\n      )\r\n    },\r\n    search(v){\r\n      axios.get(baseURL+\"/products/searchName\",{\r\n        params:{\"keyword\":v,\r\n          \"pageNum\":this.pageNum,\"pageSize\":this.pageSize}\r\n      }).then(\r\n          res=>{\r\n            this.result=res.data.records\r\n            this.total=res.data.total\r\n          }\r\n      )\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}