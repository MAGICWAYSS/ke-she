{"remainingRequest":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xiaomi\\vue\\src\\views\\Product.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\xiaomi\\vue\\src\\views\\Product.vue","mtime":1685282428226},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHtiYXNlVVJMfSBmcm9tICIuLi8uLi9wdWJsaWMvdXJsQ29uZmlnIjsNCmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOw0KaW1wb3J0IE5hdmkgZnJvbSAiLi4vY29tcG9uZW50cy9OYXZpIjsNCmltcG9ydCBQcm9kdWN0UGFyYW1zIGZyb20gIi4uL2NvbXBvbmVudHMvUHJvZHVjdFBhcmFtcyI7DQppbXBvcnQgQ29tbWVudHMgZnJvbSAiLi4vY29tcG9uZW50cy9Db21tZW50cyI7DQpsZXQgc2t1TWFwcz1uZXcgTWFwKCkNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlByb2R1Y3QiLA0KICBjb21wb25lbnRzOiB7UHJvZHVjdFBhcmFtcywgTmF2aSxDb21tZW50c30sDQogIGRhdGEoKXsNCiAgICByZXR1cm57DQogICAgICBwcm9kdWN0SWQ6IiIsDQogICAgICBudW06MSwNCiAgICAgIGN1cnJlbnRTa3VJbmRleDowLA0KICAgICAgY3VycmVudEltZ0luZGV4OjAsDQogICAgICB0YWI6IFtdLA0KICAgICAgdGFiUG9zaXRpb246IjAiLA0KICAgICAgcHJvZHVjdEluZm86e30sDQogICAgICBwcm9kdWN0U2t1OltdLA0KICAgICAgcHJvZHVjdEltZ3M6W10sDQogICAgICBza3VQcm9wczpbXSwNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgLy/ojrflj5bliLB1cmzkvKDpgJLnmoTllYblk4FpZA0KICAgIHRoaXMucHJvZHVjdElkPXRoaXMuJHJvdXRlLnF1ZXJ5LnBpZDsNCiAgICB0aGlzLmxvYWQoKTsNCiAgICB0aGlzLmFkZEhpc3RvcnkoKTsNCiAgICB2YXIgbGVuID0gMzsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7DQogICAgICB2YXIgaXRlbSA9IHt2YWx1ZTogIjAifTsNCiAgICAgIHRoaXMudGFiLnB1c2goaXRlbSk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOnsNCiAgICBsb2FkKCl7DQogICAgICBheGlvcy5nZXQoYmFzZVVSTCsiL3Byb2R1Y3RzL3Byb2R1Y3QvIit0aGlzLnByb2R1Y3RJZCkudGhlbigNCiAgICAgICAgICByZXM9PnsNCiAgICAgICAgICAgIHRoaXMucHJvZHVjdEluZm89cmVzLmRhdGEuZGF0YS5wcm9kdWN0Ow0KICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2t1PXJlcy5kYXRhLmRhdGEucHJvZHVjdFNrdTsNCiAgICAgICAgICAgIHRoaXMucHJvZHVjdEltZ3M9cmVzLmRhdGEuZGF0YS5wcm9kdWN0SW1nczsNCiAgICAgICAgICAgIC8vZXZhbOWwhmpzb27moLzlvI/ovazljJbkuLpNYXDplK7lgLzlr7nmoLzlvI8NCiAgICAgICAgICAgIHRoaXMuc2t1UHJvcHM9ZXZhbCgiKCIrdGhpcy5wcm9kdWN0U2t1W3RoaXMuY3VycmVudFNrdUluZGV4XS51bnRpdGxlZCsiKSIpOw0KICAgICAgICAgIH0NCiAgICAgICkNCiAgICB9LA0KICAgIHJlY3VyKGRhdGEpew0KICAgICAgZm9yKGxldCBpPTA7aTxkYXRhLmxlbmd0aDtpKyspew0KICAgICAgICBmb3IgKGxldCBqPTA7ajxkYXRhW2ldLmRpc3RyaWN0cy5sZW5ndGg7aisrKXsNCiAgICAgICAgICBmb3IgKGxldCBrPTA7azxkYXRhW2ldLmRpc3RyaWN0c1tqXS5kaXN0cmljdHMubGVuZ3RoO2srKyl7DQogICAgICAgICAgICBkYXRhW2ldLmRpc3RyaWN0c1tqXS5kaXN0cmljdHNba10uZGlzdHJpY3RzPXVuZGVmaW5lZA0KICAgICAgICAgIH0NCg0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gZGF0YQ0KICAgIH0sDQogICAgY2hhbmdlU2t1KHZhbCl7DQogICAgICAgIHRoaXMuY3VycmVudFNrdUluZGV4PXZhbA0KICAgICAgLy9ldmFs5bCGanNvbuagvOW8j+i9rOWMluS4uk1hcOmUruWAvOWvueagvOW8jw0KICAgICAgdGhpcy5za3VQcm9wcz1ldmFsKCIoIit0aGlzLnByb2R1Y3RTa3VbdGhpcy5jdXJyZW50U2t1SW5kZXhdLnVudGl0bGVkKyIpIik7DQogICAgfSwNCiAgICBjaGFuZ2VJbWcodmFsKXsNCiAgICAgIHRoaXMuY3VycmVudEltZ0luZGV4PXZhbA0KICAgIH0sDQogICAgY2hhbmdlS2V5KHZhbCxlKXsNCiAgICAgIHNrdU1hcHMuc2V0KGUsdmFsKQ0KICAgIH0sDQogICAgYWRkTGlzdCgpew0KICAgICAgdmFyIGE9IiINCiAgICAgIGZvciAobGV0IGtleXMgb2Ygc2t1TWFwcy5rZXlzKCkpew0KICAgICAgICBhKz1rZXlzKyI6Iitza3VNYXBzLmdldChrZXlzKSsiOyI7DQogICAgICB9DQogICAgICB2YXIgY2FydHM9ew0KICAgICAgICAiY2FydE51bSI6dGhpcy5udW0sDQogICAgICAgICJwcm9kdWN0SWQiOnRoaXMucHJvZHVjdElkLA0KICAgICAgICAicHJvZHVjdFByaWNlIjp0aGlzLnByb2R1Y3RTa3VbdGhpcy5jdXJyZW50U2t1SW5kZXhdLnNlbGxQcmljZSwNCiAgICAgICAgInNrdUlkIjp0aGlzLnByb2R1Y3RTa3VbdGhpcy5jdXJyZW50U2t1SW5kZXhdLnNrdUlkLA0KICAgICAgICAic2t1UHJvcHMiOmEsDQogICAgICAgICJ1c2VySWQiOmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKSwNCiAgICAgIH0NCiAgICAgIHZhciB0b2tlbj1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQ0KICAgICAgYXhpb3MucG9zdChiYXNlVVJMKyIvc2hvcHBpbmctY2FydC9hZGQiLGNhcnRzLHtoZWFkZXJzOnsNCiAgICAgICAgICB0b2tlbjp0b2tlbn19KS50aGVuKHJlcz0+ew0KICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGU9PTEwMDAwKXsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLm1zZykNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKHJlcy5kYXRhLmNvZGU9PTEwMDAxKXsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpDQogICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsNCiAgICAgICAgICAgICAgICBwYXRoOiAnL2xvZ2luJywNCiAgICAgICAgICAgICAgICBxdWVyeTp7DQogICAgICAgICAgICAgICAgICByZWRpcmVjdDogcm91dGVyLmN1cnJlbnRSb3V0ZS5mdWxsUGF0aCAgLy8g6Ziy5q2i5LuO5aSW6YOo6L+b5p2l55m75b2VDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgfSwNCiAgICBzdWJtaXQoKXsNCiAgICAgIHZhciBhPSIiDQogICAgICBmb3IgKGxldCBrZXlzIG9mIHNrdU1hcHMua2V5cygpKXsNCiAgICAgICAgYSs9a2V5cysiOiIrc2t1TWFwcy5nZXQoa2V5cykrIjsiOw0KICAgICAgfQ0KICAgICAgdmFyIGNhcnRzPXsNCiAgICAgICAgImNhcnROdW0iOnRoaXMubnVtLA0KICAgICAgICAicHJvZHVjdElkIjp0aGlzLnByb2R1Y3RJZCwNCiAgICAgICAgInByb2R1Y3RQcmljZSI6dGhpcy5wcm9kdWN0U2t1W3RoaXMuY3VycmVudFNrdUluZGV4XS5zZWxsUHJpY2UsDQogICAgICAgICJza3VJZCI6dGhpcy5wcm9kdWN0U2t1W3RoaXMuY3VycmVudFNrdUluZGV4XS5za3VJZCwNCiAgICAgICAgInNrdVByb3BzIjphLA0KICAgICAgICAidXNlcklkIjpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIiksDQogICAgICB9DQogICAgICB2YXIgdG9rZW49bG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikNCiAgICAgIGF4aW9zLnBvc3QoYmFzZVVSTCsiL3Nob3BwaW5nLWNhcnQvYWRkIixjYXJ0cyx7aGVhZGVyczp7DQogICAgICAgICAgdG9rZW46dG9rZW59fSkudGhlbihyZXM9PnsNCiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlPT0xMDAwMCl7DQogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvb3JkZXI/Y2lkcz0iK3Jlcy5kYXRhLmRhdGEpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZihyZXMuZGF0YS5jb2RlPT0xMDAwMSkgew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZykNCiAgICAgICAgICAgICAgcm91dGVyLnB1c2goew0KICAgICAgICAgICAgICAgIHBhdGg6ICcvbG9naW4nLA0KICAgICAgICAgICAgICAgIHF1ZXJ5OiB7DQogICAgICAgICAgICAgICAgICByZWRpcmVjdDogcm91dGVyLmN1cnJlbnRSb3V0ZS5mdWxsUGF0aCAgLy8g6Ziy5q2i5LuO5aSW6YOo6L+b5p2l55m75b2VDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGFkZEhpc3RvcnkoKXsNCiAgICAgIHZhciBoaXN0b3J5PXsNCiAgICAgICAgInByb2R1Y3RJZCI6dGhpcy5wcm9kdWN0SWQsDQogICAgICAgICJ1c2VySWQiOmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKSwNCiAgICAgIH0NCiAgICAgIGF4aW9zLnBvc3QoYmFzZVVSTCsiL2hpc3RvcnkvaW5zZXJ0IixoaXN0b3J5KQ0KICAgIH0sDQogIH0NCg0KfQ0K"},{"version":3,"sources":["Product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Product.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div style=\"overflow-x: hidden\">\r\n  <Navi/>\r\n  <el-row :gutter=\"20\" style=\"background-color: white;width: 80%;margin: 0 auto\">\r\n    <el-col :span=\"8\">\r\n      <el-col>\r\n        <el-image :src=\"require(`../img/${productImgs[currentImgIndex].url}`)\" fit=\"fill\"\r\n                  :preview-src-list=\"['../img'+productImgs[currentImgIndex].url]\"\r\n        style=\"height: 210px\"></el-image>\r\n      </el-col>\r\n      <el-col>\r\n        <el-carousel :autoplay=\"false\" type=\"card\" height=\"100px\" @change=\"changeImg\">\r\n          <el-carousel-item  v-for=\"item in productImgs\" >\r\n            <el-image :src=\"require(`../img/${item.url}`)\" style=\"height: 100%;\"></el-image>\r\n          </el-carousel-item>\r\n        </el-carousel>\r\n      </el-col>\r\n    </el-col>\r\n    <el-col :span=\"16\">\r\n        <el-col>\r\n          <h3 style=\"float: left;margin: 5px\">{{productInfo.productName}}</h3>\r\n        </el-col>\r\n        <el-col style=\"background-color:#fee9eb\">\r\n          <el-col style=\"margin: 5px\">\r\n            <el-col :span=\"3\"style=\"text-align: left;font-size: 16px\">原价：</el-col>\r\n            <el-col :span=\"16\" style=\" text-align: left\">\r\n              <em style=\"font-size: 16px;text-decoration: line-through\">¥{{productSku[currentSkuIndex].originalPrice}}</em></el-col>\r\n          </el-col>\r\n          <el-col style=\"margin: 5px\">\r\n            <el-col :span=\"3\"style=\"text-align: left;font-size: 16px\">促销价：</el-col>\r\n            <el-col :span=\"16\" style=\" text-align: left;color: #c81623\">\r\n              <em style=\"font-size:30px;font-weight: 700;\">¥{{productSku[currentSkuIndex].sellPrice}}</em></el-col>\r\n          </el-col>\r\n        </el-col>\r\n        <el-col >\r\n          <span style=\"margin: 5px;float: left\" >套餐：</span>\r\n          <div style=\"margin: 5px;float: left\" v-for=\"(sku,index) in productSku\" >\r\n            <el-radio-group v-model=\"tabPosition\" size=\"medium\"  @change=\"changeSku\">\r\n              <el-radio-button :label=\"index\" >{{sku.skuName}}</el-radio-button>\r\n            </el-radio-group>\r\n          </div>\r\n        </el-col>\r\n        <el-col v-for=\"(value,key,index) in skuProps\" >\r\n          <span style=\"margin: 5px;float: left\" >{{ key }}：</span>\r\n          <div style=\"margin: 5px;float: left\" v-for=\"(sku) in value\">\r\n            <el-radio-group v-model=\"tab[index].value\" :key=\"key\" size=\"medium\" @change=\"(skus)=>changeKey(skus,key)\" >\r\n              <el-radio-button :label=\"sku\" >{{sku}}</el-radio-button>\r\n            </el-radio-group>\r\n          </div>\r\n        </el-col>\r\n        <el-col>\r\n          <el-descriptions size=\"medium\" style=\"text-align: left;font-size: 16px;margin: 5px\">\r\n            <el-descriptions-item label=\"库存：\">{{ productSku[currentSkuIndex].stock }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"累计销量：\">{{productInfo.soldNum}}件</el-descriptions-item>\r\n          </el-descriptions>\r\n        </el-col>\r\n        <el-col>\r\n          <el-input-number v-model=\"num\"  :min=\"1\" :max=\"productSku[currentSkuIndex].stock\" label=\"描述文字\"\r\n          style=\"float: left;margin: 5px\"></el-input-number>\r\n          <el-button type=\"warning\" round plain style=\"margin: 5px;\" @click=\"addList\">添加购物车</el-button>\r\n          <el-button type=\"success\" round plain style=\"margin: 5px;\" @click=\"submit\">立即购买</el-button>\r\n        </el-col>\r\n    </el-col>\r\n  </el-row>\r\n  <el-tabs type=\"border-card\" style=\"margin: 0 auto;width: 80%\">\r\n    <el-tab-pane label=\"宝贝详情\"><ProductParams :productId=\"productId\" :productImgs=\"productImgs\"></ProductParams></el-tab-pane>\r\n    <el-tab-pane >\r\n      <span slot=\"label\"><i class=\"el-icon-chat-dot-square\"></i> 评价</span>\r\n      <Comments :productId=\"productId\"></Comments>\r\n    </el-tab-pane>\r\n  </el-tabs>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport {baseURL} from \"../../public/urlConfig\";\r\nimport router from \"@/router\";\r\nimport Navi from \"../components/Navi\";\r\nimport ProductParams from \"../components/ProductParams\";\r\nimport Comments from \"../components/Comments\";\r\nlet skuMaps=new Map()\r\nexport default {\r\n  name: \"Product\",\r\n  components: {ProductParams, Navi,Comments},\r\n  data(){\r\n    return{\r\n      productId:\"\",\r\n      num:1,\r\n      currentSkuIndex:0,\r\n      currentImgIndex:0,\r\n      tab: [],\r\n      tabPosition:\"0\",\r\n      productInfo:{},\r\n      productSku:[],\r\n      productImgs:[],\r\n      skuProps:[],\r\n    }\r\n  },\r\n  created() {\r\n    //获取到url传递的商品id\r\n    this.productId=this.$route.query.pid;\r\n    this.load();\r\n    this.addHistory();\r\n    var len = 3;\r\n    for (var i = 0; i < len; i++) {\r\n      var item = {value: \"0\"};\r\n      this.tab.push(item);\r\n    }\r\n  },\r\n  methods:{\r\n    load(){\r\n      axios.get(baseURL+\"/products/product/\"+this.productId).then(\r\n          res=>{\r\n            this.productInfo=res.data.data.product;\r\n            this.productSku=res.data.data.productSku;\r\n            this.productImgs=res.data.data.productImgs;\r\n            //eval将json格式转化为Map键值对格式\r\n            this.skuProps=eval(\"(\"+this.productSku[this.currentSkuIndex].untitled+\")\");\r\n          }\r\n      )\r\n    },\r\n    recur(data){\r\n      for(let i=0;i<data.length;i++){\r\n        for (let j=0;j<data[i].districts.length;j++){\r\n          for (let k=0;k<data[i].districts[j].districts.length;k++){\r\n            data[i].districts[j].districts[k].districts=undefined\r\n          }\r\n\r\n        }\r\n      }\r\n      return data\r\n    },\r\n    changeSku(val){\r\n        this.currentSkuIndex=val\r\n      //eval将json格式转化为Map键值对格式\r\n      this.skuProps=eval(\"(\"+this.productSku[this.currentSkuIndex].untitled+\")\");\r\n    },\r\n    changeImg(val){\r\n      this.currentImgIndex=val\r\n    },\r\n    changeKey(val,e){\r\n      skuMaps.set(e,val)\r\n    },\r\n    addList(){\r\n      var a=\"\"\r\n      for (let keys of skuMaps.keys()){\r\n        a+=keys+\":\"+skuMaps.get(keys)+\";\";\r\n      }\r\n      var carts={\r\n        \"cartNum\":this.num,\r\n        \"productId\":this.productId,\r\n        \"productPrice\":this.productSku[this.currentSkuIndex].sellPrice,\r\n        \"skuId\":this.productSku[this.currentSkuIndex].skuId,\r\n        \"skuProps\":a,\r\n        \"userId\":localStorage.getItem(\"userId\"),\r\n      }\r\n      var token=localStorage.getItem(\"token\")\r\n      axios.post(baseURL+\"/shopping-cart/add\",carts,{headers:{\r\n          token:token}}).then(res=>{\r\n            if (res.data.code==10000){\r\n              this.$message.success(res.data.msg)\r\n            }\r\n            if(res.data.code==10001){\r\n              this.$message.error(res.data.msg)\r\n              router.push({\r\n                path: '/login',\r\n                query:{\r\n                  redirect: router.currentRoute.fullPath  // 防止从外部进来登录\r\n                }\r\n              })\r\n            }\r\n          })\r\n    },\r\n    submit(){\r\n      var a=\"\"\r\n      for (let keys of skuMaps.keys()){\r\n        a+=keys+\":\"+skuMaps.get(keys)+\";\";\r\n      }\r\n      var carts={\r\n        \"cartNum\":this.num,\r\n        \"productId\":this.productId,\r\n        \"productPrice\":this.productSku[this.currentSkuIndex].sellPrice,\r\n        \"skuId\":this.productSku[this.currentSkuIndex].skuId,\r\n        \"skuProps\":a,\r\n        \"userId\":localStorage.getItem(\"userId\"),\r\n      }\r\n      var token=localStorage.getItem(\"token\")\r\n      axios.post(baseURL+\"/shopping-cart/add\",carts,{headers:{\r\n          token:token}}).then(res=>{\r\n            if (res.data.code==10000){\r\n              this.$router.push(\"/order?cids=\"+res.data.data)\r\n            }\r\n            if(res.data.code==10001) {\r\n              this.$message.error(res.data.msg)\r\n              router.push({\r\n                path: '/login',\r\n                query: {\r\n                  redirect: router.currentRoute.fullPath  // 防止从外部进来登录\r\n                }\r\n              })\r\n            }\r\n      })\r\n    },\r\n    addHistory(){\r\n      var history={\r\n        \"productId\":this.productId,\r\n        \"userId\":localStorage.getItem(\"userId\"),\r\n      }\r\n      axios.post(baseURL+\"/history/insert\",history)\r\n    },\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}