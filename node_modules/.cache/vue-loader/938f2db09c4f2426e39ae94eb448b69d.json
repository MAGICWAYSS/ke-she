{"remainingRequest":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xiaomi\\vue\\src\\views\\Person.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\xiaomi\\vue\\src\\views\\Person.vue","mtime":1685282428226},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2Jhc2VVUkx9IGZyb20gIi4uLy4uL3B1YmxpYy91cmxDb25maWciOw0KaW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsNCmltcG9ydCBOYXZpIGZyb20gIi4uL2NvbXBvbmVudHMvTmF2aSI7DQppbXBvcnQgQ29tbWVudExpc3QgZnJvbSAiLi4vY29tcG9uZW50cy9Db21tZW50TGlzdCI7DQppbXBvcnQgQWRkcmVzcyBmcm9tICIuLi9jb21wb25lbnRzL0FkZHJlc3MiOw0KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsNCmltcG9ydCBMb2dpbkhpc3RvcnkgZnJvbSAiLi4vY29tcG9uZW50cy9Mb2dpbkhpc3RvcnkiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJQZXJzb24iLA0KICBjb21wb25lbnRzOiB7TG9naW5IaXN0b3J5LCBBZGRyZXNzLCBDb21tZW50TGlzdCwgTmF2aX0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGJhc2VVUkw6IGJhc2VVUkwsDQogICAgICBtc2c6IiIsDQogICAgICBmb3JtOnt9LA0KICAgICAgaW1nOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaW1nIikgLA0KICAgICAgdXNlcm5hbWU6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VybmFtZSIpLA0KICAgICAgYWN0aXZlTmFtZTogJ3NlY29uZCcsDQogICAgICB1c2VyQWRkcjpbXSwNCiAgICAgIHVzZXJJZDpsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIiksDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vIOivt+axguWIhumhteafpeivouaVsOaNrg0KICAgIHRoaXMubG9hZCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBsb2FkKCkgew0KICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi91c2VyL29uZS8iK2xvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VybmFtZSIpDQogICAgICApLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5mb3JtPXJlcy5kYXRhDQogICAgICB9KQ0KICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi91c2VyLWFkZHIvYWRkci8iK3RoaXMudXNlcklkKS50aGVuKA0KICAgICAgICAgIHJlcz0+e3RoaXMudXNlckFkZHI9cmVzLmRhdGF9KQ0KICAgIH0sDQogICAgY2hpbGRjbGljayhpdGVtKXsNCiAgICAgIHRoaXMudXNlckFkZHI9aXRlbQ0KICAgICAgdGhpcy5sb2FkKCkNCiAgICB9LA0KICAgIHNhdmUoKSB7DQogICAgICBheGlvcy5wb3N0KGJhc2VVUkwrIi91c2VyIiwgdGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMuZGF0YSkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+d5a2Y5oiQ5YqfIikNCiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICB0aGlzLmxvYWQoKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS/neWtmOWksei0pSIpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBkZWxldGVPbmUoaWQpew0KICAgICAgICBheGlvcy5kZWxldGUoYmFzZVVSTCsiL3VzZXItYWRkci9kZWxldGVPbmUiLHsNCiAgICAgICAgICBwYXJhbXM6ew0KICAgICAgICAgICAgaWQ6aWQNCiAgICAgICAgICB9DQogICAgICAgIH0pLnRoZW4oDQogICAgICAgICAgICByZXM9PnsNCiAgICAgICAgICAgICAgaWYocmVzLmRhdGE9PT10cnVlKXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5Yig6Zmk5oiQ5YqfIikNCiAgICAgICAgICAgICAgZWxzZSB0aGlzLiRtZXNzYWdlLmVycm9yKCLliKDpmaTlpLHotKUiKQ0KICAgICAgICAgICAgICB0aGlzLmxvYWQoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICApDQogICAgfSwNCiAgICB1cGRhdGUoaWQpew0KICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi91c2VyLWFkZHIvdXBkYXRlQ29tbW9uQWRkciIsew0KICAgICAgICBwYXJhbXM6ew0KICAgICAgICAgIGlkOmlkDQogICAgICAgIH0NCiAgICAgIH0pLnRoZW4oDQogICAgICAgICAgcmVzPT57DQogICAgICAgICAgICBpZihyZXMuZGF0YT09PXRydWUpdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkv67mlLnmiJDlip8iKQ0KICAgICAgICAgICAgZWxzZSB0aGlzLiRtZXNzYWdlLmVycm9yKCLkv67mlLnlpLHotKUiKQ0KICAgICAgICAgICAgdGhpcy5sb2FkKCkNCiAgICAgICAgICB9DQogICAgICApDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Person.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Person.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div >\r\n    <Navi/>\r\n    <el-tabs v-model=\"activeName\" tab-position=\"left\" style=\"width: 80%;margin: 0 auto\">\r\n      <el-tab-pane label=\"个人资料\" name=\"second\"><el-card style=\"width: 80%;float: left\">\r\n        <el-form label-width=\"80px\" size=\"small\">\r\n          <el-upload\r\n              class=\"avatar-uploader\"\r\n              :action=\"baseURL+'/product-img/upload/'+username\"\r\n              :show-file-list=\"false\"\r\n          >\r\n            <img  :src=\"'http://localhost:9090/img/'+form.userImg\" style=\"width: 100px\"></img>\r\n           </el-upload>\r\n\r\n\r\n          <el-form-item label=\"用户名\">\r\n            <el-input v-model=\"form.username\" disabled autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"用户ID\">\r\n            <el-input v-model=\"form.userId\" disabled autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"性别\">\r\n            <el-input v-model=\"form.userSex\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"昵称\">\r\n            <el-input v-model=\"form.nickname\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"真实姓名\">\r\n            <el-input v-model=\"form.realname\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮箱\">\r\n            <el-input v-model=\"form.userEmail\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"电话\">\r\n            <el-input v-model=\"form.userMobile\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"注册时间\">\r\n            <el-input  v-model=\"form.userRegtime\" disabled autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-card></el-tab-pane>\r\n      <el-tab-pane label=\"收货地址\" name=\"third\">\r\n        <Address :user-addr=\"userAddr\" @itemclick=\"childclick\"></Address>\r\n        <el-row style=\"padding: 10px;\" v-if=\"userAddr!=null\">\r\n          <el-table :data=\"userAddr\">\r\n            <el-table-column label=\"收货人\" prop=\"receiverName\">\r\n            </el-table-column>\r\n            <el-table-column label=\"手机号\" prop=\"receiverMobile\" width=\"120px\"></el-table-column>\r\n            <el-table-column label=\"省\" prop=\"province\"></el-table-column>\r\n            <el-table-column label=\"市\" prop=\"city\"></el-table-column>\r\n            <el-table-column label=\"区\" prop=\"area\"></el-table-column>\r\n            <el-table-column label=\"地址\" prop=\"addr\"></el-table-column>\r\n            <el-table-column label=\"邮编\" prop=\"postCode\"></el-table-column>\r\n            <el-table-column label=\"操作\" fixed=\"right\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button v-if=\"scope.row.commonAddr===1\" disabled type=\"text\" size=\"mini\">默认地址</el-button>\r\n                <el-button v-else @click=\"update(scope.row.addrId)\" type=\"text\" size=\"mini\">设为默认地址</el-button>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column fixed=\"right\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                    size=\"mini\" @click=\"deleteOne(scope.row.addrId)\"\r\n                    type=\"text\" icon=\"el-icon-delete\">删除</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-row>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"我的评价\" name=\"fourth\"><CommentList></CommentList></el-tab-pane>\r\n      <el-tab-pane label=\"登录历史\" name=\"fivth\"><LoginHistory></LoginHistory></el-tab-pane>\r\n    </el-tabs>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {baseURL} from \"../../public/urlConfig\";\r\nimport request from \"@/utils/request\";\r\nimport Navi from \"../components/Navi\";\r\nimport CommentList from \"../components/CommentList\";\r\nimport Address from \"../components/Address\";\r\nimport axios from \"axios\";\r\nimport LoginHistory from \"../components/LoginHistory\";\r\n\r\nexport default {\r\n  name: \"Person\",\r\n  components: {LoginHistory, Address, CommentList, Navi},\r\n  data() {\r\n    return {\r\n      baseURL: baseURL,\r\n      msg:\"\",\r\n      form:{},\r\n      img: localStorage.getItem(\"img\") ,\r\n      username: localStorage.getItem(\"username\"),\r\n      activeName: 'second',\r\n      userAddr:[],\r\n      userId:localStorage.getItem(\"userId\"),\r\n    }\r\n  },\r\n  created() {\r\n    // 请求分页查询数据\r\n    this.load()\r\n  },\r\n  methods: {\r\n    load() {\r\n      axios.get(baseURL+\"/user/one/\"+localStorage.getItem(\"username\")\r\n      ).then(res => {\r\n        this.form=res.data\r\n      })\r\n      axios.get(baseURL+\"/user-addr/addr/\"+this.userId).then(\r\n          res=>{this.userAddr=res.data})\r\n    },\r\n    childclick(item){\r\n      this.userAddr=item\r\n      this.load()\r\n    },\r\n    save() {\r\n      axios.post(baseURL+\"/user\", this.form).then(res => {\r\n        if (res.data) {\r\n          this.$message.success(\"保存成功\")\r\n          this.dialogFormVisible = false\r\n          this.load()\r\n        } else {\r\n          this.$message.error(\"保存失败\")\r\n        }\r\n      })\r\n    },\r\n    deleteOne(id){\r\n        axios.delete(baseURL+\"/user-addr/deleteOne\",{\r\n          params:{\r\n            id:id\r\n          }\r\n        }).then(\r\n            res=>{\r\n              if(res.data===true)this.$message.success(\"删除成功\")\r\n              else this.$message.error(\"删除失败\")\r\n              this.load()\r\n            }\r\n        )\r\n    },\r\n    update(id){\r\n      axios.get(baseURL+\"/user-addr/updateCommonAddr\",{\r\n        params:{\r\n          id:id\r\n        }\r\n      }).then(\r\n          res=>{\r\n            if(res.data===true)this.$message.success(\"修改成功\")\r\n            else this.$message.error(\"修改失败\")\r\n            this.load()\r\n          }\r\n      )\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.avatar-uploader {\r\n  text-align: center;\r\n  padding-bottom: 10px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409EFF;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 138px;\r\n  height: 138px;\r\n  line-height: 138px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 138px;\r\n  height: 138px;\r\n  display: block;\r\n}\r\n</style>\r\n"]}]}