{"remainingRequest":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xiaomi\\vue\\src\\views\\Remark.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\xiaomi\\vue\\src\\views\\Remark.vue","mtime":1685282428226},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\xiaomi\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\xiaomi\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTmF2aSBmcm9tICIuLi9jb21wb25lbnRzL05hdmkiOw0KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsNCmltcG9ydCB7YmFzZVVSTH0gZnJvbSAiLi4vLi4vcHVibGljL3VybENvbmZpZyI7DQpsZXQgYT17fQ0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUmVtYXJrIiwNCiAgY29tcG9uZW50czoge05hdml9LA0KICBkYXRhKCl7DQogICAgcmV0dXJuew0KICAgICAgYWN0aW9uOiIiLA0KICAgICAgcHJvZHVjdElkOiIiLA0KICAgICAgbGltaXQ6NSwNCiAgICAgIGlzQW5vbnltb3VzOiIwIiwNCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgdXNlcklkOiIiLA0KICAgICAgdmFsdWU6bnVsbCwNCiAgICAgIHRleHRhcmVhOiIiLA0KICAgICAgcHJvZHVjdE5hbWU6IiIsDQogICAgICBjb250ZW50OiIiLA0KICAgICAgcHJvZHVjdEltZzoiIiwNCiAgICAgIGNvbW1lbnRJbWc6W10sDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuYWN0aW9uPWJhc2VVUkwNCiAgICB0aGlzLnByb2R1Y3RJZD10aGlzLiRyb3V0ZS5xdWVyeS5waWQ7DQogICAgdGhpcy51c2VySWQ9bG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpDQogICAgdGhpcy5sb2FkKCkNCiAgfSwNCiAgbWV0aG9kczp7DQogICAgbG9hZCgpew0KICAgICAgYXhpb3MuZ2V0KGJhc2VVUkwrIi9wcm9kdWN0cy9wcm9kdWN0LyIrdGhpcy5wcm9kdWN0SWQpLnRoZW4oDQogICAgICAgICAgcmVzPT57DQogICAgICAgICAgICB0aGlzLnByb2R1Y3ROYW1lPXJlcy5kYXRhLmRhdGEucHJvZHVjdC5wcm9kdWN0TmFtZQ0KICAgICAgICAgICAgdGhpcy5jb250ZW50PXJlcy5kYXRhLmRhdGEucHJvZHVjdC5jb250ZW50DQogICAgICAgICAgICB0aGlzLnByb2R1Y3RJbWc9cmVzLmRhdGEuZGF0YS5wcm9kdWN0SW1nc1swXS51cmwNCiAgICAgICAgICB9DQogICAgICApDQogICAgfSwNCiAgICBoYW5kbGVTdWNjZXNzKHJlc3BvbnNlLGZpbGUsIGZpbGVMaXN0KSB7DQogICAgICB0aGlzLmNvbW1lbnRJbWcucHVzaChyZXNwb25zZSkNCiAgICAgIGE9ew0KICAgICAgICBpbWc6dGhpcy5jb21tZW50SW1nDQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgew0KICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOw0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIGNvbW1lbnQoKXsNCiAgICAgIGxldCBjb21tZW50PXsNCiAgICAgICAgICAiY29tbUltZ3MiOkpTT04uc3RyaW5naWZ5KGEpLA0KICAgICAgICAiY29tbUNvbnRlbnQiOnRoaXMudGV4dGFyZWEsDQogICAgICAgICJjb21tTGV2ZWwiOnRoaXMudmFsdWUsDQogICAgICAgICJpc0Fub255bW91cyI6dGhpcy5pc0Fub255bW91cywNCiAgICAgICAgInByb2R1Y3RJZCI6dGhpcy5wcm9kdWN0SWQsDQogICAgICAgICJwcm9kdWN0TmFtZSI6dGhpcy5wcm9kdWN0TmFtZSwNCiAgICAgICAgInVzZXJJZCI6dGhpcy51c2VySWQsDQogICAgICB9DQogICAgICBheGlvcy5wb3N0KGJhc2VVUkwrIi9wcm9kdWN0LWNvbW1lbnRzL21ha2VDb21tZW50Iixjb21tZW50KS50aGVuKA0KICAgICAgICAgIHJlcz0+ew0KICAgICAgICAgICAgaWYocmVzLmRhdGEuY29kZT09PTEwMDAwKXRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tc2cpDQogICAgICAgICAgICBlbHNlIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnKQ0KICAgICAgICAgIH0NCiAgICAgICkNCiAgICAgIGF4aW9zLmdldChiYXNlVVJMKyIvb3JkZXItaXRlbS91cGRhdGVDb21tZW50Iix7DQogICAgICAgIHBhcmFtczp7DQogICAgICAgICAgIml0ZW1JZCI6bG9jYWxTdG9yYWdlLmdldEl0ZW0oIml0ZW1faWQiKSwNCiAgICAgICAgICAiaXNDb21tZW50IjoxDQogICAgICAgIH0sDQogICAgICAgIGhlYWRlcnM6ew0KICAgICAgICAgICJ0b2tlbiI6bG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikNCiAgICAgICAgfQ0KICAgICAgfSkudGhlbigpDQogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaXRlbV9pZCIpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Remark.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Remark.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div>\r\n  <Navi/>\r\n  <div>\r\n    <el-row STYLE=\"width: 80%;margin: 0 auto\">\r\n      <el-col :span=\"8\"style=\"padding: 50px\">\r\n        <el-row >\r\n          <router-link :to=\"{name:'Product',query:{pid:productId}}\">\r\n            <img :src=\"'http://localhost:9090/img/'+productImg\" style=\"width: 200px\"></img></router-link>\r\n        </el-row>\r\n        <el-row>\r\n          <el-link :href=\"'product?pid='+productId\" :underline=\"false\">\r\n            <span>{{productName}}</span>\r\n          </el-link>\r\n        </el-row>\r\n        <el-row>\r\n          <span style=\"font-size: 10px;color: rgb(173,173,173)\">{{content}}</span>\r\n        </el-row>\r\n      </el-col>\r\n      <el-col :span=\"16\" style=\"padding: 50px\">\r\n        <el-row>\r\n          <el-rate\r\n              v-model=\"value\" show-text style=\"float: left\"\r\n              :colors=\"['#99A9BF', '#F7BA2A', '#FF9900']\">1\r\n          </el-rate>\r\n        </el-row>\r\n        <el-row>\r\n          <el-input\r\n              type=\"textarea\"\r\n              placeholder=\"亲，写点评价吧，你的评价对其他买家有很大帮助的。\"\r\n              v-model=\"textarea\"\r\n              maxlength=\"255\"\r\n              show-word-limit\r\n          >\r\n          </el-input>\r\n        </el-row>\r\n        <el-row>\r\n          <el-upload\r\n              :action=\"action+'/product-comments/upload'\"\r\n              list-type=\"picture-card\" :limit=\"limit\" :on-success=\"handleSuccess\"\r\n              :on-preview=\"handlePictureCardPreview\" style=\"float: left\">\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-upload>\r\n          <el-dialog :visible.sync=\"dialogVisible\">\r\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n          </el-dialog>\r\n        </el-row>\r\n        <el-row>\r\n          <template>\r\n            <el-radio v-model=\"isAnonymous\" label=\"0\">公开</el-radio>\r\n            <el-radio v-model=\"isAnonymous\" label=\"1\">匿名</el-radio>\r\n            <el-button @click=\"comment\">发表评论</el-button>\r\n          </template>\r\n        </el-row>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Navi from \"../components/Navi\";\r\nimport axios from \"axios\";\r\nimport {baseURL} from \"../../public/urlConfig\";\r\nlet a={}\r\nexport default {\r\n  name: \"Remark\",\r\n  components: {Navi},\r\n  data(){\r\n    return{\r\n      action:\"\",\r\n      productId:\"\",\r\n      limit:5,\r\n      isAnonymous:\"0\",\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      userId:\"\",\r\n      value:null,\r\n      textarea:\"\",\r\n      productName:\"\",\r\n      content:\"\",\r\n      productImg:\"\",\r\n      commentImg:[],\r\n    }\r\n  },\r\n  created() {\r\n    this.action=baseURL\r\n    this.productId=this.$route.query.pid;\r\n    this.userId=localStorage.getItem(\"userId\")\r\n    this.load()\r\n  },\r\n  methods:{\r\n    load(){\r\n      axios.get(baseURL+\"/products/product/\"+this.productId).then(\r\n          res=>{\r\n            this.productName=res.data.data.product.productName\r\n            this.content=res.data.data.product.content\r\n            this.productImg=res.data.data.productImgs[0].url\r\n          }\r\n      )\r\n    },\r\n    handleSuccess(response,file, fileList) {\r\n      this.commentImg.push(response)\r\n      a={\r\n        img:this.commentImg\r\n      }\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    comment(){\r\n      let comment={\r\n          \"commImgs\":JSON.stringify(a),\r\n        \"commContent\":this.textarea,\r\n        \"commLevel\":this.value,\r\n        \"isAnonymous\":this.isAnonymous,\r\n        \"productId\":this.productId,\r\n        \"productName\":this.productName,\r\n        \"userId\":this.userId,\r\n      }\r\n      axios.post(baseURL+\"/product-comments/makeComment\",comment).then(\r\n          res=>{\r\n            if(res.data.code===10000)this.$message.success(res.data.msg)\r\n            else this.$message.error(res.data.msg)\r\n          }\r\n      )\r\n      axios.get(baseURL+\"/order-item/updateComment\",{\r\n        params:{\r\n          \"itemId\":localStorage.getItem(\"item_id\"),\r\n          \"isComment\":1\r\n        },\r\n        headers:{\r\n          \"token\":localStorage.getItem(\"token\")\r\n        }\r\n      }).then()\r\n      localStorage.removeItem(\"item_id\")\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}